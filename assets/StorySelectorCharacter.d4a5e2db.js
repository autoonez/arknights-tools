import{d as g,Q as D,_ as C,c as _,w as i,o as c,a as p,t as I,h as S,f as m,i as h,r as V,b as O,F as f,j as $,aA as w,H as v}from"./index.732bea17.js";import{u as T}from"./CharacterStore.33e40be1.js";import{u as L,a as k}from"./StoryReaderStore.2cdf8df3.js";import{V as N}from"./VCard.4f5122d5.js";import{V as b}from"./VDialog.9e799250.js";import{V as z,a as F,c as R}from"./VList.b6802739.js";import"./tag.0fd7181d.js";import"./router.0637ecb7.js";const U=g({name:"OperatorCard",props:["characterId","characterName","isSelected"],setup(e){return{imgSrc:`${D}/images/avatar/${e.characterId}.png`}}});const j={class:"operator-card-img-wrap"},q=["src"],A={class:"operator-card-name"};function E(e,r,n,a,o,l){return c(),_(N,{"max-width":"64px",class:"rounded-0"},{default:i(()=>[p("div",j,[p("img",{src:e.imgSrc,class:"operator-card-img"},null,8,q)]),p("p",A,I(e.characterName),1)]),_:1})}const H=C(U,[["render",E],["__scopeId","data-v-8a4e05fa"]]),Q=g({name:"CharStorySetListDialog",props:["characterId"],emits:["selectStorySet"],setup(e,{emit:r}){const n=L(),a=S(()=>n.language),{getCharacterStorySet:o}=k(),l=S(()=>o(e.characterId));return{language:a,storySetList:l}}});function G(e,r,n,a,o,l){return c(),_(b,null,{default:i(()=>[m(N,null,{default:i(()=>[m(z,null,{default:i(()=>[(c(!0),h(f,null,V(e.storySetList,(s,d)=>(c(),_(F,{key:d,onClick:t=>e.$emit("selectStorySet",s.id)},{default:i(()=>[m(R,null,{default:i(()=>[O(I(s.name[e.language]||s.name.zh_CN),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1})}const J=C(Q,[["render",G]]),K=g({name:"StorySelectorCharacter",components:{OperatorCard:H,CharStorySetListDialog:J},setup(){const e=L(),r=w(),n=S(()=>e.language),a=$(!1),o=$(""),{getStorySetByCharacterId:l}=k(),{getOperators:s}=T(),d=S(()=>l()),t=s().filter(u=>d.value?u.id in d.value:!1);return{dialog:a,selectedCharacter:o,language:n,operators:t,selectCharacter:u=>{o.value=u,a.value=!0},selectStorySet:u=>{a.value=!1,r.push({name:"select-story",query:{storySetId:u}})}}}});const M={class:"character-container"};function P(e,r,n,a,o,l){const s=v("OperatorCard"),d=v("CharStorySetListDialog");return c(),h(f,null,[p("div",M,[(c(!0),h(f,null,V(e.operators,(t,y)=>(c(),_(s,{key:y,characterId:t.id,characterName:t.name[e.language]||t.appellation||t.name.zh_CN,onClick:B=>e.selectCharacter(t.id)},null,8,["characterId","characterName","onClick"]))),128))]),m(d,{modelValue:e.dialog,"onUpdate:modelValue":r[0]||(r[0]=t=>e.dialog=t),characterId:e.selectedCharacter,onSelectStorySet:e.selectStorySet},null,8,["modelValue","characterId","onSelectStorySet"])],64)}const re=C(K,[["render",P],["__scopeId","data-v-0cf76850"]]);export{re as default};
