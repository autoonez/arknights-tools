var rl=Object.defineProperty,nl=Object.defineProperties;var ol=Object.getOwnPropertyDescriptors;var Ee=Object.getOwnPropertySymbols;var ht=Object.prototype.hasOwnProperty,ft=Object.prototype.propertyIsEnumerable;var mt=(e,t,r)=>t in e?rl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,h=(e,t)=>{for(var r in t||(t={}))ht.call(t,r)&&mt(e,r,t[r]);if(Ee)for(var r of Ee(t))ft.call(t,r)&&mt(e,r,t[r]);return e},ce=(e,t)=>nl(e,ol(t));var Xe=(e,t)=>{var r={};for(var o in e)ht.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&Ee)for(var o of Ee(e))t.indexOf(o)<0&&ft.call(e,o)&&(r[o]=e[o]);return r};import{_ as P,j as be,o as _,c as z,w as u,Q as g,O as U,aM as sl,K as O,t as he,aN as dl,p as ie,aB as Ue,aO as xt,I as m,aP as Ce,aK as Ne,b as a,aH as kt,aj as Me,ah as pe,aQ as Qe,aR as Ve,aC as oe,G,aS as ul,aT as cl,aU as vl,ak as Ze,aV as It,a0 as te,a1 as Pe,aA as $e,a8 as De,Z as ge,g as ne,y as Se,z as je,A as Fe,B as N,av as ue,aW as Ct,aI as J,F as q,L as ae,aX as pl,aY as wt,aZ as St,ad as Ge,a_ as et,am as ml,a as D,r as ee,R as tt,a$ as Vt,S as lt,b0 as le,V as ve,m as Oe,e as Ie,l as ze,d as L,i as Be,b1 as at,N as $t,h as Y,b2 as Lt,x as Ke,b3 as Re,b4 as it,b5 as Tt,$ as rt,ar as _t,b6 as Ot,a6 as zt,b7 as Rt,Y as Mt,q as Pt,s as nt,b8 as hl,v as ot,a5 as fl,b9 as _l,C as Dt,a7 as bl,D as st,ba as gl,E as dt,bb as yl,ac as xl,ae as kl,ag as bt,bc as Il,bd as Cl,be as wl,f as Et,af as Sl,bf as K,bg as Vl,bh as $l,bi as Ll,aD as Tl,bj as Ol,bk as gt,bl as zl,bm as Rl,bn as Ml,u as Pl,bo as Dl,J as El,bp as Al,bq as Fl,br as Bl,bs as ql,bt as Ul,bu as Nl,bv as jl,bw as Gl,bx as Kl,by as Wl}from"./index.a989dcf1.js";import{a as Le,f as At,n as Hl,s as Yl,b as We,c as qe,g as Je,h as Xl,i as Ft,u as Jl,j as yt,k as Ql,d as X,e as Te,V as Zl}from"./VProgressLinear.713b172e.js";const ea={name:"MaterialInput",props:["itemId","modelValue","max","min"],computed:{material(){return this.$store.state.item.itemDataById[this.itemId]},imgSrc(){return`${be}/images/items/${this.material.iconId}.png`},input:{get(){return this.modelValue||0},set(e){this.$emit("update:modelValue",e)}}}},ta={class:"current-item-img-wrap"},la={class:"v-responsive v-img"},aa=["src"],ia=["min","max"];function ra(e,t,r,o,i,l){return _(),z(Le,{"max-width":"64px",class:"rounded-0"},{default:u(()=>[g("div",ta,[g("div",la,[g("img",{src:l.imgSrc,class:"v-img__img v-img__img--contain"},null,8,aa)])]),U(g("input",{type:"number",min:r.min||0,max:r.max,"onUpdate:modelValue":t[0]||(t[0]=n=>l.input=n),class:"current-item-input-label"},null,8,ia),[[sl,l.input]])]),_:1})}var Bt=P(ea,[["render",ra],["__scopeId","data-v-4475ebec"]]);const na={name:"MaterialExpItem",props:["itemId","number","min","max"],emits:["update"],data(){return{}},components:{MaterialInput:Bt}};function oa(e,t,r,o,i,l){const n=O("MaterialInput");return _(),z(n,{itemId:r.itemId,modelValue:r.number,min:r.min,max:r.max,"onUpdate:modelValue":t[0]||(t[0]=s=>this.$emit("update",{itemId:r.itemId,oldValue:r.number,newValue:s}))},null,8,["itemId","modelValue","min","max"])}var sa=P(na,[["render",oa]]);const da={props:["itemId","number"],emits:["selectItem"],computed:{imgSrc(){return`${be}/images/items/${this.$store.state.item.itemDataById[this.itemId].iconId}.png`}},methods:{selectItem(){this.$emit("selectItem",this.itemId)}}},ua={class:"item-number"};function ca(e,t,r,o,i,l){return _(),z(Le,{"max-width":"64px",style:dl({backgroundImage:`url(${l.imgSrc})`}),class:"rounded-0 item"},{default:u(()=>[g("p",ua,he(r.number||0),1)]),_:1},8,["style"])}var qt=P(da,[["render",ca],["__scopeId","data-v-226231e8"]]);const va=ie({name:"VMessages",props:h({active:Boolean,color:String,messages:{type:[Array,String],default:()=>[]}},Ue({transition:{component:xt,leaveAbsolute:!0,group:!0}})),setup(e,t){let{slots:r}=t;const o=m(()=>Ce(e.messages)),{textColorClasses:i,textColorStyles:l}=Ne(m(()=>e.color));return()=>a(kt,{transition:e.transition,tag:"div",class:["v-messages",i.value],style:l.value},{default:()=>[e.active&&o.value.map((n,s)=>a("div",{class:"v-messages__message",key:`${s}-${o.value}`},[r.message?r.message({message:n}):n]))]})}}),pa=Symbol.for("vuetify:form");function ma(){return Me(pa,null)}const ha=pe({disabled:Boolean,error:Boolean,errorMessages:{type:[Array,String],default:()=>[]},maxErrors:{type:[Number,String],default:1},name:String,readonly:Boolean,rules:{type:Array,default:()=>[]},modelValue:null,validationValue:null});function fa(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Qe(),r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ve();const o=oe(e,"modelValue"),i=m(()=>{var y;return(y=e.validationValue)!=null?y:o.value}),l=ma(),n=G([]),s=G(!0),d=m(()=>!!(Ce(o.value===""?null:o.value).length||Ce(i.value===""?null:i.value).length)),c=m(()=>!!(e.disabled||l!=null&&l.isDisabled.value)),v=m(()=>!!(e.readonly||l!=null&&l.isReadonly.value)),f=m(()=>e.errorMessages.length?Ce(e.errorMessages):n.value),p=m(()=>e.rules.length?e.error||f.value.length?!1:s.value?null:!0:!0),V=G(!1),T=m(()=>({[`${t}--error`]:p.value===!1,[`${t}--dirty`]:d.value,[`${t}--disabled`]:c.value,[`${t}--readonly`]:v.value})),w=m(()=>{var y;return(y=e.name)!=null?y:ul(r)});cl(()=>{l==null||l.register(w.value,k,x,C,p)}),vl(()=>{l==null||l.unregister(w.value)}),Ze(i,()=>{i.value!=null&&k()});function x(){C(),o.value=null}function C(){s.value=!0,n.value=[]}async function k(){const y=[];V.value=!0;for(const I of e.rules){if(y.length>=(e.maxErrors||1))break;const $=await(typeof I=="function"?I:()=>I)(i.value);if($!==!0){if(typeof $!="string"){console.warn(`${$} is not a valid value. Rule functions must return boolean true or a string.`);continue}y.push($)}}return n.value=y,V.value=!1,s.value=!1,n.value}return{errorMessages:f,isDirty:d,isDisabled:c,isReadonly:v,isPristine:s,isValid:p,isValidating:V,reset:x,resetValidation:C,validate:k,validationClasses:T}}const ut=pe(h(h({id:String,appendIcon:te,prependIcon:te,hideDetails:[Boolean,String],messages:{type:[Array,String],default:()=>[]},direction:{type:String,default:"horizontal",validator:e=>["horizontal","vertical"].includes(e)}},Pe()),ha())),ct=$e()({name:"VInput",props:h({},ut()),emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:r,slots:o,emit:i}=t;const{densityClasses:l}=De(e),n=Ve(),s=m(()=>e.id||`input-${n}`),{errorMessages:d,isDirty:c,isDisabled:v,isReadonly:f,isPristine:p,isValid:V,isValidating:T,reset:w,resetValidation:x,validate:C,validationClasses:k}=fa(e,"v-input",s),y=m(()=>({id:s,isDirty:c,isDisabled:v,isReadonly:f,isPristine:p,isValid:V,isValidating:T,reset:w,resetValidation:x,validate:C}));return ge(()=>{var I,R,$,E,M;const A=!!(o.prepend||e.prependIcon),S=!!(o.append||e.appendIcon),B=!!((I=e.messages)!=null&&I.length||d.value.length),W=!e.hideDetails||e.hideDetails==="auto"&&B;return a("div",{class:["v-input",`v-input--${e.direction}`,l.value,k.value]},[A&&a("div",{class:"v-input__prepend"},[o==null||(R=o.prepend)==null?void 0:R.call(o,y.value),e.prependIcon&&a(ne,{onClick:r["onClick:prepend"],icon:e.prependIcon},null)]),o.default&&a("div",{class:"v-input__control"},[($=o.default)==null?void 0:$.call(o,y.value)]),S&&a("div",{class:"v-input__append"},[o==null||(E=o.append)==null?void 0:E.call(o,y.value),e.appendIcon&&a(ne,{onClick:r["onClick:append"],icon:e.appendIcon},null)]),W&&a("div",{class:"v-input__details"},[a(va,{active:B,messages:d.value.length>0?d.value:e.messages},{message:o.message}),(M=o.details)==null?void 0:M.call(o,y.value)])])}),{reset:w,resetValidation:x,validate:C}}});function Ut(e){return It(e,Object.keys(ct.props))}const Nt=ie({name:"VLabel",props:h({text:String},Se()),setup(e,t){let{slots:r}=t;return()=>{var o;return a("label",{class:"v-label"},[e.text,(o=r.default)==null?void 0:o.call(r)])}}}),Ae=ie({name:"VFieldLabel",props:{floating:Boolean},setup(e,t){let{slots:r}=t;return()=>a(Nt,{class:["v-field-label",{"v-field-label--floating":e.floating}],"aria-hidden":e.floating||void 0},r)}}),_a=pe({loading:Boolean},"loader");function ba(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Qe();return{loaderClasses:m(()=>({[`${t}--loading`]:e.loading}))}}function ga(e,t){var r;let{slots:o}=t;return a("div",{class:`${e.name}__loader`},[((r=o.default)==null?void 0:r.call(o,{color:e.color,isActive:e.active}))||a(At,{active:e.active,color:e.color,height:"2",indeterminate:!0},null)])}const jt=pe({focused:Boolean},"focus");function Gt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Qe();const r=oe(e,"focused"),o=m(()=>({[`${t}--focused`]:r.value}));function i(){r.value=!0}function l(){r.value=!1}return{focusClasses:o,isFocused:r,focus:i,blur:l}}const ya=["underlined","outlined","filled","solo","plain"],Kt=pe(h(h({appendInnerIcon:te,bgColor:String,clearable:Boolean,clearIcon:{type:te,default:"$clear"},active:Boolean,color:String,dirty:Boolean,disabled:Boolean,error:Boolean,label:String,persistentClear:Boolean,prependInnerIcon:te,reverse:Boolean,singleLine:Boolean,variant:{type:String,default:"filled",validator:e=>ya.includes(e)}},Se()),_a()),"v-field"),Wt=$e()({name:"VField",inheritAttrs:!1,props:h(h({id:String},jt()),Kt()),emits:{"click:clear":e=>!0,"click:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:r,emit:o,slots:i}=t;const{themeClasses:l}=je(e),{loaderClasses:n}=ba(e),{focusClasses:s,isFocused:d,focus:c,blur:v}=Gt(e),f=m(()=>e.dirty||e.active),p=m(()=>!e.singleLine&&!!(e.label||i.label)),V=Ve(),T=m(()=>e.id||`input-${V}`),w=G(),x=G(),C=G(),{backgroundColorClasses:k,backgroundColorStyles:y}=Fe(N(e,"bgColor")),{textColorClasses:I,textColorStyles:R}=Ne(m(()=>f.value&&d.value&&!e.error&&!e.disabled?e.color:void 0));Ze(f,M=>{if(p.value){const A=w.value.$el,S=x.value.$el,B=Hl(A),W=S.getBoundingClientRect(),Q=W.x-B.x,Z=W.y-B.y-(B.height/2-W.height/2),H=W.width/.75,F=Math.abs(H-B.width)>1?{maxWidth:ue(H)}:void 0,j=parseFloat(getComputedStyle(A).transitionDuration)*1e3,se=parseFloat(getComputedStyle(S).getPropertyValue("--v-field-label-scale"));A.style.visibility="visible",S.style.visibility="hidden",A.animate([{transform:"translate(0)"},h({transform:`translate(${Q}px, ${Z}px) scale(${se})`},F)],{duration:j,easing:Yl,direction:M?"normal":"reverse"}).finished.then(()=>{A.style.removeProperty("visibility"),S.style.removeProperty("visibility")})}},{flush:"post"});const $=m(()=>({isActive:f,isFocused:d,controlRef:C,blur:v,focus:c}));function E(M){M.target!==document.activeElement&&M.preventDefault(),o("click:control",M)}return ge(()=>{var M,A,S;const B=e.variant==="outlined",W=i.prependInner||e.prependInnerIcon,Q=!!(e.clearable||i.clear),Z=!!(i.appendInner||e.appendInnerIcon||Q),H=i.label?i.label({label:e.label,props:{for:T.value}}):e.label;return a("div",ae({class:["v-field",{"v-field--active":f.value,"v-field--appended":Z,"v-field--disabled":e.disabled,"v-field--dirty":e.dirty,"v-field--error":e.error,"v-field--has-background":!!e.bgColor,"v-field--persistent-clear":e.persistentClear,"v-field--prepended":W,"v-field--reverse":e.reverse,"v-field--single-line":e.singleLine,"v-field--has-label":!!H,[`v-field--variant-${e.variant}`]:!0},l.value,k.value,s.value,n.value],style:[y.value,R.value],onClick:E},r),[a("div",{class:"v-field__overlay"},null),a(ga,{name:"v-field",active:e.loading,color:e.error?"error":e.color},{default:i.loader}),W&&a("div",{class:"v-field__prepend-inner"},[e.prependInnerIcon&&a(ne,{onClick:r["onClick:prependInner"],icon:e.prependInnerIcon},null),i==null||(M=i.prependInner)==null?void 0:M.call(i,$.value)]),a("div",{class:"v-field__field","data-no-activator":""},[["solo","filled"].includes(e.variant)&&p.value&&a(Ae,{ref:x,class:[I.value],floating:!0},{default:()=>[H]}),a(Ae,{ref:w,for:T.value},{default:()=>[H]}),(A=i.default)==null?void 0:A.call(i,ce(h({},$.value),{props:{id:T.value,class:"v-field__input"},focus:c,blur:v}))]),Q&&a(Ct,null,{default:()=>[U(a("div",{class:"v-field__clearable"},[i.clear?i.clear():a(ne,{onClick:F=>o("click:clear",F),icon:e.clearIcon},null)]),[[J,e.dirty]])]}),Z&&a("div",{class:"v-field__append-inner"},[i==null||(S=i.appendInner)==null?void 0:S.call(i,$.value),e.appendInnerIcon&&a(ne,{onClick:r["onClick:appendInner"],icon:e.appendInnerIcon},null)]),a("div",{class:["v-field__outline",I.value]},[B&&a(q,null,[a("div",{class:"v-field__outline__start"},null),p.value&&a("div",{class:"v-field__outline__notch"},[a(Ae,{ref:x,floating:!0},{default:()=>[H]})]),a("div",{class:"v-field__outline__end"},null)]),["plain","underlined"].includes(e.variant)&&p.value&&a(Ae,{ref:x,floating:!0},{default:()=>[H]})])])}),{controlRef:C}}});function xa(e){return It(e,Object.keys(Wt.props))}const ka=ie({name:"VCounter",functional:!0,props:h({active:Boolean,max:[Number,String],value:{type:[Number,String],default:0}},Ue({transition:{component:xt}})),setup(e,t){let{slots:r}=t;const o=m(()=>e.max?`${e.value} / ${e.max}`:String(e.value));return()=>a(kt,{transition:e.transition},{default:()=>[U(a("div",{class:"v-counter"},[r.default?r.default({counter:o.value,max:e.max,value:e.value}):o.value]),[[J,e.active]])]})}}),Ia=["color","file","time","date","datetime-local","week","month"],we=$e()({name:"VTextField",directives:{Intersect:pl},inheritAttrs:!1,props:h(h({autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,hint:String,persistentHint:Boolean,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,suffix:String,type:{type:String,default:"text"}},ut()),Kt()),emits:{"click:clear":e=>!0,"click:control":e=>!0,"click:input":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:r,emit:o,slots:i}=t;const l=oe(e,"modelValue"),n=m(()=>{var k;return typeof e.counterValue=="function"?e.counterValue(l.value):((k=l.value)!=null?k:"").toString().length}),s=m(()=>{if(r.maxlength)return r.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter});function d(k,y){var I,R;!e.autofocus||!k||(I=y[0].target)==null||(R=I.focus)==null||R.call(I)}const c=G(),v=G(),f=G(!1),p=G(),V=m(()=>Ia.includes(e.type)||e.persistentPlaceholder||f.value),T=m(()=>e.messages.length?e.messages:f.value||e.persistentHint?e.hint:"");function w(){if(p.value!==document.activeElement){var k;(k=p.value)==null||k.focus()}f.value||(f.value=!0)}function x(k){w(),o("click:control",k)}function C(k){k.stopPropagation(),w(),ml(()=>{l.value="",o("click:clear",k)})}return ge(()=>{const k=!!(i.counter||e.counter||e.counterValue),[y,I]=wt(r),[M]=Ut(e),A=M,{modelValue:R}=A,$=Xe(A,["modelValue"]),[E]=xa(e);return a(ct,ae({ref:c,modelValue:l.value,"onUpdate:modelValue":S=>l.value=S,class:["v-text-field",{"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-text-field--flush-details":["plain","underlined"].includes(e.variant)}],"onClick:prepend":r["onClick:prepend"],"onClick:append":r["onClick:append"]},y,$,{messages:T.value}),ce(h({},i),{default:S=>{let{id:B,isDisabled:W,isDirty:Q,isReadonly:Z,isValid:H}=S;return a(Wt,ae({ref:v,onMousedown:F=>{F.target!==p.value&&F.preventDefault()},"onClick:control":x,"onClick:clear":C,"onClick:prependInner":r["onClick:prependInner"],"onClick:appendInner":r["onClick:appendInner"],role:"textbox"},E,{id:B.value,active:V.value||Q.value,dirty:Q.value||e.dirty,focused:f.value,error:H.value===!1}),ce(h({},i),{default:F=>{var j;let{props:de}=F,ye=de,{class:se}=ye,me=Xe(ye,["class"]);return a(q,null,[e.prefix&&a("span",{class:"v-text-field__prefix"},[e.prefix]),a("div",{class:se,onClick:xe=>o("click:input",xe),"data-no-activator":""},[(j=i.default)==null?void 0:j.call(i),U(a("input",ae({ref:p,"onUpdate:modelValue":xe=>l.value=xe,autofocus:e.autofocus,readonly:Z.value,disabled:W.value,name:e.name,placeholder:e.placeholder,size:1,type:e.type,onFocus:w,onBlur:()=>f.value=!1},me,I),null),[[St,l.value],[Ge("intersect"),{handler:d},null,{once:!0}]])]),e.suffix&&a("span",{class:"v-text-field__suffix"},[e.suffix])])}}))},details:k?()=>a(q,null,[a("span",null,null),a(ka,{active:e.persistentCounter||f.value,value:n.value,max:s.value},i.counter)]):void 0}))}),et({},c,v,p)}}),Ca={name:"MaterialFormula",props:["formulaType","formulaId"],emits:["changeFormula"],inject:["craftingFormula","craftingItem","itemRequireFromCharacter","itemRequireFromCrafting"],data(){return{}},computed:{formulaData(){return this.$store.state.itemFormulaDataById[this.formulaType][this.formulaId]},formulaAmount:{get(){return this.craftingFormula[this.formulaType][this.formulaId]||0},set(e){this.$emit("changeFormula",{formulaType:this.formulaType,formulaId:this.formulaId,oldValue:this.craftingFormula[this.formulaType][this.formulaId]||0,newValue:e})}},costs(){return this.formulaData.costs.map(e=>({itemId:e.id,count:e.count*this.formulaAmount}))},itemRequire(){let e=this.formulaData.itemId,t=this.itemRequireFromCharacter[e]||0,r=this.itemRequireFromCrafting[e]||0,o=this.craftingItem[e]||0,i=this.$store.state.materialPlanner.currentItem[e]||0;return t+r-i-o}},components:{ItemWithNumber:qt}},wa={class:"d-flex justify-center mb-4"},Sa={class:"material-container"};function Va(e,t,r,o,i,l){const n=O("ItemWithNumber");return _(),z(tt,{style:{minWidth:"176px"}},{default:u(()=>[g("div",wa,[a(n,{itemId:l.formulaData.itemId,number:l.formulaData.count*l.formulaAmount},null,8,["itemId","number"])]),a(we,{type:"number",variant:"outlined",modelValue:l.formulaAmount,"onUpdate:modelValue":t[0]||(t[0]=s=>l.formulaAmount=s),max:l.itemRequire+l.formulaAmount,min:0,"single-line":"","hide-details":"",class:"w-100 mb-4"},null,8,["modelValue","max"]),g("div",Sa,[(_(!0),D(q,null,ee(l.costs,(s,d)=>(_(),z(n,{key:d,itemId:s.itemId,number:s.count},null,8,["itemId","number"]))),128))])]),_:1})}var $a=P(Ca,[["render",Va],["__scopeId","data-v-b663869a"]]);const La={name:"MaterialDialog",props:["itemId"],inject:["craftingItem","itemRequireFromCharacter","itemRequireFromCrafting"],emits:["changeFormula"],computed:{material(){return this.$store.state.item.itemDataById[this.itemId]},imgSrc(){return`${be}/images/items/${this.material.iconId}.png`},requireFromCharacter(){return this.itemRequireFromCharacter[this.itemId]||0},requireFromCrafting(){return this.itemRequireFromCrafting[this.itemId]||0},crafting(){return this.craftingItem[this.itemId]||0},totalRequire(){return this.requireFromCharacter+this.requireFromCrafting},netRequire(){return this.totalRequire-this.currentItem-this.crafting},currentItem:{get(){return this.$store.state.materialPlanner.currentItem[this.itemId]||0},set(e){this.$store.dispatch(Vt,{itemId:this.itemId,value:e})}},craftingFormulas(){return Object.entries(this.$store.state.itemFormulaDataById).reduce((e,[t,r])=>{for(const o of Object.values(r))for(const i of o.costs)i.id===this.itemId&&e[t].push(o.formulaId);return e},{MANUFACTURE:[],WORKSHOP:[]})}},methods:{changeFormula(e){this.$emit("changeFormula",e)}},components:{MaterialFormula:$a}},Ta=L("Character require"),Oa=L("Crafting require"),za={style:{maxWidth:"80vw","overflow-x":"auto","overflow-y":"hidden",display:"flex"}},Ra=L("Total require"),Ma=L("Current"),Pa=L("Still require");function Da(e,t,r,o,i,l){const n=O("MaterialFormula");return _(),z(We,{class:"dialog"},{default:u(()=>[a(Le,null,{default:u(()=>[a(lt,{src:l.imgSrc,width:"86px",class:"ma-auto py-4"},null,8,["src"]),a(le),a(ve,{lines:"two"},{default:u(()=>[a(Oe,null,{default:u(()=>[a(Ie,null,{default:u(()=>[Ta]),_:1}),a(ze,null,{default:u(()=>[L(he(l.requireFromCharacter),1)]),_:1})]),_:1})]),_:1}),a(ve,{lines:"two"},{default:u(()=>[a(Oe,null,{default:u(()=>[a(Ie,null,{default:u(()=>[Oa]),_:1}),a(ze,null,{default:u(()=>[L(he(l.requireFromCrafting),1)]),_:1})]),_:1})]),_:1}),g("div",za,[(_(!0),D(q,null,ee(l.craftingFormulas,(s,d)=>(_(),D(q,{key:d},[(_(!0),D(q,null,ee(s,c=>(_(),z(n,{key:c,"formula-type":d,"formula-id":c,onChangeFormula:l.changeFormula},null,8,["formula-type","formula-id","onChangeFormula"]))),128))],64))),128))]),a(le),a(ve,{lines:"two"},{default:u(()=>[a(Oe,null,{default:u(()=>[a(Ie,null,{default:u(()=>[Ra]),_:1}),a(ze,null,{default:u(()=>[L(he(l.totalRequire),1)]),_:1})]),_:1})]),_:1}),a(le),a(ve,{lines:"two"},{default:u(()=>[a(Oe,null,{default:u(()=>[a(Ie,null,{default:u(()=>[Ma]),_:1}),a(ze,null,{default:u(()=>[a(we,{label:"Current",variant:"outlined",type:"number",modelValue:l.currentItem,"onUpdate:modelValue":t[0]||(t[0]=s=>l.currentItem=s),"hide-details":"","single-line":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(le),a(ve,{lines:"two"},{default:u(()=>[a(Oe,null,{default:u(()=>[a(Ie,null,{default:u(()=>[Pa]),_:1}),a(ze,null,{default:u(()=>[L(he(l.netRequire),1)]),_:1})]),_:1})]),_:1}),(_(!0),D(q,null,ee(l.material.buildingProductList,(s,d)=>(_(),D(q,{key:d},[a(le),a(n,{"formula-type":s.roomType,"formula-id":s.formulaId,onChangeFormula:l.changeFormula},null,8,["formula-type","formula-id","onChangeFormula"])],64))),128))]),_:1})]),_:1})}var Ea=P(La,[["render",Da]]);const Aa={name:"MaterialItem",props:["itemId","requireFromCharacter","requireFromCrafting","crafting"],computed:{current(){return this.$store.state.materialPlanner.currentItem[this.itemId]||0},number(){return(this.requireFromCharacter||0)+(this.requireFromCrafting||0)-this.current-(this.crafting||0)}},components:{ItemWithNumber:qt}};function Fa(e,t,r,o,i,l){const n=O("ItemWithNumber");return l.number>0?(_(),z(n,{key:0,"item-id":r.itemId,number:l.number},null,8,["item-id","number"])):Be("",!0)}var Ba=P(Aa,[["render",Fa]]);const qa={name:"MaterialCurrentItem",props:["itemId"],data(){return{}},computed:{number:{get(){return this.$store.state.materialPlanner.currentItem[this.itemId]||0},set(e){this.$store.dispatch(Vt,{itemId:this.itemId,value:e})}}},components:{MaterialInput:Bt}};function Ua(e,t,r,o,i,l){const n=O("MaterialInput");return _(),z(n,{itemId:r.itemId,modelValue:l.number,"onUpdate:modelValue":t[0]||(t[0]=s=>l.number=s)},null,8,["itemId","modelValue"])}var Na=P(qa,[["render",Ua]]);const ja={name:"MaterialCurrentDialog",emits:["close"],computed:h({},at(["materials"])),components:{MaterialCurrentItem:Na}},Ga=L("mdi-close"),Ka=L("Current Item List"),Wa={class:"material-container"};function Ha(e,t,r,o,i,l){const n=O("MaterialCurrentItem");return _(),z(We,{fullscreen:"",scrollable:"",scrim:!1,class:"dialog"},{default:u(()=>[a(Le,null,{default:u(()=>[a($t,null,{default:u(()=>[a(Y,{icon:"",dark:"",onClick:t[0]||(t[0]=s=>this.$emit("close"))},{default:u(()=>[a(ne,null,{default:u(()=>[Ga]),_:1})]),_:1}),a(Lt,null,{default:u(()=>[Ka]),_:1})]),_:1}),a(qe,{class:"dialog-container"},{default:u(()=>[g("div",Wa,[(_(!0),D(q,null,ee(e.materials,(s,d)=>(_(),z(n,{key:d,itemId:s.itemId},null,8,["itemId"]))),128))])]),_:1})]),_:1})]),_:1})}var Ya=P(ja,[["render",Ha],["__scopeId","data-v-bd5693ac"]]);const Xa={name:"MaterialPlannerItems",props:["panel"],data(){return{showAll:!1,selectedItem:"",showMaterialDialog:!1,showMaterialCurrentDialog:!1,expItems:{total:0,items:{},min:{},max:{}},craftingItem:{},craftingFormula:{WORKSHOP:{},MANUFACTURE:{}},itemRequireFromCharacter:{},itemRequireFromCrafting:{4001:0}}},computed:ce(h({},at(["materials"])),{itemDataById(){return this.$store.state.item.itemDataById},expItemById(){return this.$store.state.gameData.expItems},expItemList(){return Object.values(this.expItemById).sort((e,t)=>t.gainExp-e.gainExp)},materialList(){return this.materials.filter(e=>e.itemType==="MATERIAL")},currentItem(){return this.$store.state.materialPlanner.currentItem},lmd(){return this.itemRequireFromCharacter[4001]||0}}),methods:{getResult(){let e=this.getItemRequireFromCharacter(),t={total:0,items:{},min:{},max:{}},r=Object.keys(this.expItemById);for(const o of r){let i=(e[o]||0)-(this.currentItem[o]||0);t.items[o]=i,t.total+=i*this.expItemById[o].gainExp}this.itemRequireFromCharacter=e,this.expItems=t},expItemChange({itemId:e,oldValue:t,newValue:r}){if(t===r)return;let o=h({},this.expItems.items),i=this.expItemById[e].gainExp*Math.abs(r-t);if(r>t)for(let l=this.expItemList.findIndex(n=>n.id===e)+1;l<=this.expItemList.length-1&&i!==0;l++){let n=this.expItemList[l],s=this.expItems.items[n.id];if(s===0)continue;let d=Math.floor(i/n.gainExp);s>d?(o[n.id]-=d,i-=d*n.gainExp):(o[n.id]-=s,i-=s*n.gainExp)}else if(r<t)for(let l=this.expItemList.findIndex(n=>n.id===e)+1;l<=this.expItemList.length-1&&i!==0;l++){let n=this.expItemList[l],s=Math.floor(i/n.gainExp);o[n.id]+=s,i-=s*n.gainExp}i===0?(o[e]=r,this.expItems.items=o,this.expItems.min={},this.expItems.max={}):r>t?this.expItems.max[e]=t:r<t&&(this.expItems.min[e]=t)},selectItem(e){this.selectedItem=e,this.showMaterialDialog=!0},closeDialog(){this.showMaterialCraftingDialog=!1,this.showMaterialDialog=!1,this.showMaterialListDialog=!1,this.getResult()},getItemRequireFromCharacter(){let e={itemRequireById:{4001:0},addItemSet(o={}){for(const[i,l]of Object.entries(o))i in this.itemRequireById||(this.itemRequireById[i]=0),this.itemRequireById[i]+=l},removeItemSet(o={}){for(const[i,l]of Object.entries(o))i in this.itemRequireById&&(this.itemRequireById[i]-=l)}},t=this.$store.state.gameData,r=o=>{let i=Object.values(t.expItems).sort((n,s)=>s.gainExp-n.gainExp),l=i.reduce((n,s)=>(n[s.id]=0,n),{});for(const[n,s]of i.entries())if(o/s.gainExp>0){let d=Math.floor(o/s.gainExp);l[s.id]+=d,o-=s.gainExp*d}else o>0&&n===i.length-1&&(l[s.id]+=1);return l};for(const o of this.$store.state.materialPlanner.selectedOperatorIds){let i=this.$store.state.itemUseByCharacterId[o],l=this.$store.state.character.characterDataById[o],n=this.$store.state.materialPlanner.currentOperator[o],s=this.$store.state.materialPlanner.targetOperator[o];s.phase>0&&e.addItemSet(i.phases[s.phase]),n.phase>0&&e.removeItemSet(i.phases[n.phase]);let d=s.phase-n.parse;if(d>0){let c=t.evolveGoldCost[l.rarity];e.addItemSet({4001:c.reverse().slice(0,d).reduce((v,f)=>v+=f,0)})}for(let c=n.phase;c<=s.phase;c++){let v=t.maxLevel[l.rarity][c],f=c===s.phase?n.level:1,p=c===s.phase?s.level:v;if(p-f>0){let V=t.characterUpgradeCostMap[c],T=t.characterExpMap[c];e.addItemSet({4001:V.slice(f-1,p-1).reduce((x,C)=>x+=C,0)});let w=T.slice(f-1,p-1).reduce((x,C)=>x+=C,0);e.addItemSet(r(w))}}e.addItemSet(i.allSkillLvlup[s.skillLevel]),e.removeItemSet(i.allSkillLvlup[n.skillLevel]);for(const c of Object.keys(i.skills))s.skillMastery[c]>0&&e.addItemSet(i.skills[c].levelUpCostCond[s.skillMastery[c]]),n.skillMastery[c]>0&&e.removeItemSet(i.skills[c].levelUpCostCond[n.skillMastery[c]]);for(const c of Object.keys(i.modules))s.modules[c]>0&&e.addItemSet(i.modules[c][s.modules[c]]),n.modules[c]>0&&e.removeItemSet(i.modules[c][n.modules[c]])}return e.itemRequireById},craftingFormulaChange(e){const{formulaType:t,formulaId:r,oldValue:o,newValue:i}=e;if(i!==o){let l=this.$store.state.itemFormulaDataById[t][r],n=i-o,s=this.craftingItem[l.itemId]||0;s+=n*l.count,this.craftingFormula[t][r]=i,this.craftingItem[l.itemId]=s,this.itemRequireFromCrafting[4001]+=n*l.goldCost;for(const d of l.costs){let c=this.itemRequireFromCrafting[d.id]||0;c+=n*d.count,this.itemRequireFromCrafting[d.id]=c}}}},watch:{panel(){this.panel==="ITEM"&&this.getResult()}},provide(){return{craftingItem:m(()=>this.craftingItem),craftingFormula:m(()=>this.craftingFormula),itemRequireFromCharacter:m(()=>this.itemRequireFromCharacter),itemRequireFromCrafting:m(()=>this.itemRequireFromCrafting)}},components:{MaterialExpItem:sa,MaterialDialog:Ea,MaterialItem:Ba,MaterialCurrentDialog:Ya}},Ja=L("LMD"),Qa=L("Material"),Za=L("EXP"),ei=L("Current Items");function ti(e,t,r,o,i,l){const n=O("MaterialItem"),s=O("MaterialExpItem"),d=O("MaterialDialog"),c=O("MaterialCurrentDialog");return _(),z(tt,null,{default:u(()=>[a(Le,null,{default:u(()=>[a(Je,null,{default:u(()=>[Ja]),_:1}),a(le),a(Je,null,{default:u(()=>[Qa]),_:1}),a(qe,{class:"material-container"},{default:u(()=>[(_(!0),D(q,null,ee(l.materialList,v=>(_(),z(n,{"item-id":v.itemId,"require-from-character":i.itemRequireFromCharacter[v.itemId],"require-from-crafting":i.itemRequireFromCrafting[v.itemId],crafting:i.craftingItem[v.itemId],key:v.itemId,onClick:f=>l.selectItem(v.itemId)},null,8,["item-id","require-from-character","require-from-crafting","crafting","onClick"]))),128))]),_:1}),a(le),a(Je,null,{default:u(()=>[Za]),_:1}),a(qe,{class:"material-container"},{default:u(()=>[(_(!0),D(q,null,ee(l.expItemList,(v,f)=>(_(),z(s,{key:f,itemId:v.id,number:i.expItems.items[v.id],min:i.expItems.min[v.id],max:i.expItems.max[v.id],onUpdate:l.expItemChange},null,8,["itemId","number","min","max","onUpdate"]))),128))]),_:1}),a(le),a(Xl,null,{default:u(()=>[a(Y,{variant:"outlined",onClick:t[0]||(t[0]=v=>i.showMaterialCurrentDialog=!0)},{default:u(()=>[ei]),_:1})]),_:1})]),_:1}),a(d,{modelValue:i.showMaterialDialog,"onUpdate:modelValue":t[1]||(t[1]=v=>i.showMaterialDialog=v),"item-id":i.selectedItem,onChangeFormula:l.craftingFormulaChange},null,8,["modelValue","item-id","onChangeFormula"]),a(c,{modelValue:i.showMaterialCurrentDialog,"onUpdate:modelValue":t[2]||(t[2]=v=>i.showMaterialCurrentDialog=v),onClose:t[3]||(t[3]=v=>i.showMaterialCurrentDialog=!1)},null,8,["modelValue"])]),_:1})}var li=P(Xa,[["render",ti],["__scopeId","data-v-16078ea7"]]);const ai={name:"OperatorClassIcon",props:["classId"],computed:{imgSrc(){return`${be}/images/class/icon_profession_${this.classId.toLowerCase()}.png`}}},ii={class:"d-flex"},ri=["src"];function ni(e,t,r,o,i,l){return _(),z(Y,{height:"48px",width:"48px"},{default:u(()=>[g("div",ii,[g("img",{src:l.imgSrc,class:"w-100"},null,8,ri)])]),_:1})}var oi=P(ai,[["render",ni]]);const si={name:"OperatorSubClassIcon",props:["subClassId"],computed:{imgSrc(){return`${be}/images/sub-class/sub_${this.subClassId}_icon.png`}}},di={class:"d-flex"},ui=["src"];function ci(e,t,r,o,i,l){return _(),z(Y,{height:"48px",width:"48px"},{default:u(()=>[g("div",di,[g("img",{src:l.imgSrc,class:"w-100"},null,8,ui)])]),_:1})}var vi=P(si,[["render",ci]]);const Ht=ie({name:"VTable",props:h(h(h({fixedHeader:Boolean,fixedFooter:Boolean,height:[Number,String]},Pe()),Se()),Ke()),setup(e,t){let{slots:r}=t;const{themeClasses:o}=je(e),{densityClasses:i}=De(e);return()=>{var l,n,s;return a(e.tag,{class:["v-table",{"v-table--fixed-height":!!e.height,"v-table--fixed-header":e.fixedHeader,"v-table--fixed-footer":e.fixedFooter,"v-table--has-top":!!r.top,"v-table--has-bottom":!!r.bottom},o.value,i.value]},{default:()=>[(l=r.top)==null?void 0:l.call(r),r.default&&a("div",{class:"v-table__wrapper",style:{height:ue(e.height)}},[a("table",null,[(n=r.default)==null?void 0:n.call(r)])]),(s=r.bottom)==null?void 0:s.call(r)]})}}}),pi={name:"OperatorFilterDialog",props:["filter"],emits:["close"],data(){return{filterClass:this.filter.filterClass,filterSubClass:this.filter.filterSubClass,filterRarity:this.filter.filterRarity,filterSelection:this.filter.filterSelection}},computed:{operatorClasses(){return Object.values(this.$store.state.character.characterClassById).filter(e=>!["TOKEN","TRAP"].includes(e.classId))},allSubClasses(){return this.operatorClasses.reduce((e,t)=>e.concat([...t.subClass]),[])},subClasses(){var e;return((e=this.$store.state.character.characterClassById[this.filterClass])==null?void 0:e.subClass)||[]},rarity(){return[...Array(6).keys()].reverse()}},methods:{close(){this.$emit("close",{filterClass:this.filterClass,filterSubClass:this.filterSubClass,filterRarity:this.filterRarity,filterSelection:this.filterSelection})}},watch:{filterClass(e,t){e!==t&&(this.filterSubClass="ALL")}},components:{OperatorClassIcon:oi,OperatorSubClassIcon:vi}},mi=g("td",{class:"text-right"},"Class",-1),hi=L(" All "),fi=g("td",{class:"text-right"},"Sub-Class",-1),_i=L(" All "),bi=g("td",{class:"text-right"},"Rarity",-1),gi=L(" All "),yi=g("td",{class:"text-right"},"Selection",-1),xi=L(" All "),ki=L(" Selected ");function Ii(e,t,r,o,i,l){const n=O("OperatorClassIcon"),s=O("OperatorSubClassIcon");return _(),z(We,{"onClick:outside":l.close},{default:u(()=>[a(Ht,{style:{"max-width":"100vw"}},{default:u(()=>[g("tbody",null,[g("tr",null,[mi,a(Re,{modelValue:i.filterClass,"onUpdate:modelValue":t[0]||(t[0]=d=>i.filterClass=d),color:"info",mandatory:"",divided:"",class:"rounded-0"},{default:u(()=>[g("td",null,[a(Y,{height:"48px",width:"48px",value:"ALL"},{default:u(()=>[hi]),_:1})]),(_(!0),D(q,null,ee(l.operatorClasses,(d,c)=>(_(),D("td",{key:c},[a(n,{classId:d.classId,value:d.classId},null,8,["classId","value"])]))),128))]),_:1},8,["modelValue"])]),g("tr",null,[fi,a(Re,{modelValue:i.filterSubClass,"onUpdate:modelValue":t[1]||(t[1]=d=>i.filterSubClass=d),color:"info",mandatory:"",divided:"",class:"rounded-0"},{default:u(()=>[g("td",null,[a(Y,{height:"48px",width:"48px",value:"ALL"},{default:u(()=>[_i]),_:1})]),(_(!0),D(q,null,ee(l.allSubClasses,(d,c)=>(_(),D("td",{key:c},[U(a(s,{subClassId:d,value:d},null,8,["subClassId","value"]),[[J,l.subClasses.includes(d)]])]))),128))]),_:1},8,["modelValue"])]),g("tr",null,[bi,a(Re,{modelValue:i.filterRarity,"onUpdate:modelValue":t[2]||(t[2]=d=>i.filterRarity=d),color:"info",mandatory:"",divided:"",class:"rounded-0"},{default:u(()=>[g("td",null,[a(Y,{height:"48px",width:"48px",value:"ALL"},{default:u(()=>[gi]),_:1})]),(_(!0),D(q,null,ee(l.rarity,d=>(_(),D("td",{key:d},[a(Y,{height:"48px",width:"48px",value:d},{default:u(()=>[L(he(d+1),1)]),_:2},1032,["value"])]))),128))]),_:1},8,["modelValue"])]),g("tr",null,[yi,a(Re,{modelValue:i.filterSelection,"onUpdate:modelValue":t[3]||(t[3]=d=>i.filterSelection=d),color:"info",mandatory:"",divided:"",class:"rounded-0"},{default:u(()=>[g("td",null,[a(Y,{height:"48px",width:"48px",value:"ALL"},{default:u(()=>[xi]),_:1})]),g("td",null,[a(Y,{height:"48px",width:"48px",value:"SELECTED"},{default:u(()=>[ki]),_:1})])]),_:1},8,["modelValue"])])])]),_:1})]),_:1},8,["onClick:outside"])}var Ci=P(pi,[["render",Ii]]);const Yt=Symbol.for("vuetify:selection-control-group");ie({name:"VSelectionControlGroup",props:{disabled:Boolean,id:String,inline:Boolean,name:String,falseIcon:te,trueIcon:te,multiple:{type:Boolean,default:null},readonly:Boolean,type:String,modelValue:null},emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:r}=t;const o=oe(e,"modelValue"),i=Ve(),l=m(()=>e.id||`v-selection-control-group-${i}`),n=m(()=>e.name||l.value);return it(Yt,{disabled:N(e,"disabled"),inline:N(e,"inline"),modelValue:o,multiple:m(()=>!!e.multiple||e.multiple==null&&Array.isArray(o.value)),name:n,falseIcon:N(e,"falseIcon"),trueIcon:N(e,"trueIcon"),readonly:N(e,"readonly"),type:N(e,"type")}),ge(()=>{var s;return a("div",{class:"v-selection-control-group","aria-labelled-by":e.type==="radio"?l.value:void 0,role:e.type==="radio"?"radiogroup":void 0},[r==null||(s=r.default)==null?void 0:s.call(r)])}),{}}});const Xt=pe(h(h({color:String,disabled:Boolean,error:Boolean,id:String,inline:Boolean,label:String,falseIcon:te,trueIcon:te,ripple:{type:Boolean,default:!0},multiple:{type:Boolean,default:null},name:String,readonly:Boolean,trueValue:null,falseValue:null,modelValue:null,type:String,value:null,valueComparator:{type:Function,default:Tt}},Se()),Pe()));function wi(e){const t=Me(Yt,void 0),{densityClasses:r}=De(e),o=oe(e,"modelValue"),i=m(()=>e.trueValue!==void 0?e.trueValue:e.value!==void 0?e.value:!0),l=m(()=>e.falseValue!==void 0?e.falseValue:!1),n=m(()=>(t==null?void 0:t.multiple.value)||!!e.multiple||e.multiple==null&&Array.isArray(o.value)),s=m({get(){const f=t?t.modelValue.value:o.value;return n.value?f.some(p=>e.valueComparator(p,i.value)):e.valueComparator(f,i.value)},set(f){if(e.readonly)return;const p=f?i.value:l.value;let V=p;n.value&&(V=f?[...Ce(o.value),p]:Ce(o.value).filter(T=>!e.valueComparator(T,i.value))),t?t.modelValue.value=V:o.value=V}}),{textColorClasses:d,textColorStyles:c}=Ne(m(()=>s.value&&!e.error&&!e.disabled?e.color:void 0)),v=m(()=>{var f,p;return s.value?(f=t==null?void 0:t.trueIcon.value)!=null?f:e.trueIcon:(p=t==null?void 0:t.falseIcon.value)!=null?p:e.falseIcon});return{group:t,densityClasses:r,trueValue:i,falseValue:l,model:s,textColorClasses:d,textColorStyles:c,icon:v}}const Si=$e()({name:"VSelectionControl",directives:{Ripple:rt},inheritAttrs:!1,props:Xt(),emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:r,slots:o}=t;const{densityClasses:i,group:l,icon:n,model:s,textColorClasses:d,textColorStyles:c,trueValue:v}=wi(e),f=Ve(),p=m(()=>e.id||`input-${f}`),V=G(!1),T=G(!1),w=G();function x(k){V.value=!0,(!_t||_t&&k.target.matches(":focus-visible"))&&(T.value=!0)}function C(){V.value=!1,T.value=!1}return ge(()=>{var k,y,I,R;const $=o.label?o.label({label:e.label,props:{for:p.value}}):e.label,E=(k=l==null?void 0:l.type.value)!=null?k:e.type,[M,A]=wt(r);return a("div",ae({class:["v-selection-control",{"v-selection-control--dirty":s.value,"v-selection-control--disabled":e.disabled,"v-selection-control--error":e.error,"v-selection-control--focused":V.value,"v-selection-control--focus-visible":T.value,"v-selection-control--inline":(l==null?void 0:l.inline.value)||e.inline},i.value]},M),[a("div",{class:["v-selection-control__wrapper",d.value],style:c.value},[(y=o.default)==null?void 0:y.call(o),U(a("div",{class:["v-selection-control__input"]},[n.value&&a(ne,{icon:n.value},null),U(a("input",ae({"onUpdate:modelValue":S=>s.value=S,ref:w,disabled:e.disabled,id:p.value,onBlur:C,onFocus:x,"aria-readonly":e.readonly,type:E,value:v.value,name:(I=l==null?void 0:l.name.value)!=null?I:e.name,"aria-checked":E==="checkbox"?s.value:void 0},A),null),[[St,s.value]]),(R=o.input)==null?void 0:R.call(o,{model:s,textColorClasses:d,props:{onFocus:x,onBlur:C,id:p.value}})]),[[Ge("ripple"),e.ripple&&[!e.disabled&&!e.readonly,null,["center","circle"]]]])]),$&&a(Nt,{for:p.value},{default:()=>[$]})])}),{isFocused:V,input:w}}}),Vi=pe(h({indeterminate:Boolean,indeterminateIcon:{type:te,default:"$checkboxIndeterminate"}},Xt({falseIcon:"$checkboxOff",trueIcon:"$checkboxOn"}))),$i=ie({name:"VCheckboxBtn",props:Vi(),emits:{"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,t){let{slots:r,emit:o}=t;const i=oe(e,"indeterminate");function l(d){i.value&&(i.value=!1),o("update:modelValue",d)}const n=m(()=>e.indeterminate?e.indeterminateIcon:e.falseIcon),s=m(()=>e.indeterminate?e.indeterminateIcon:e.trueIcon);return ge(()=>a(Si,ae(e,{class:"v-checkbox-btn",type:"checkbox",inline:!0,"onUpdate:modelValue":l,falseIcon:n.value,trueIcon:s.value,"aria-checked":e.indeterminate?"mixed":void 0}),r)),{}}});const Jt=Symbol.for("vuetify:v-chip-group");ie({name:"VChipGroup",props:h(h(h(h({column:Boolean,filter:Boolean,valueComparator:{type:Function,default:Tt}},Ot({selectedClass:"v-chip--selected"})),Ke()),Se()),zt({variant:"tonal"})),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:r}=t;const{themeClasses:o}=je(e),{isSelected:i,select:l,next:n,prev:s,selected:d}=Rt(e,Jt);return Mt({VChip:{color:N(e,"color"),filter:N(e,"filter"),variant:N(e,"variant")}}),()=>{var c;return a(e.tag,{class:["v-chip-group",{"v-chip-group--column":e.column},o.value]},{default:()=>[(c=r.default)==null?void 0:c.call(r,{isSelected:i,select:l,next:n,prev:s,selected:d.value})]})}}});const Li=ie({name:"VChip",directives:{Ripple:rt},props:h(h(h(h(h(h(h(h(h(h({activeClass:String,appendAvatar:String,appendIcon:te,closable:Boolean,closeIcon:{type:te,default:"$delete"},closeLabel:{type:String,default:"$vuetify.close"},draggable:Boolean,filter:Boolean,filterIcon:{type:String,default:"$complete"},label:Boolean,link:Boolean,pill:Boolean,prependAvatar:String,prependIcon:te,ripple:{type:Boolean,default:!0},text:String,modelValue:{type:Boolean,default:!0}},Pt()),Pe()),nt()),hl()),ot()),fl()),_l()),Ke({tag:"span"})),Se()),zt({variant:"tonal"})),emits:{"click:close":e=>!0,"update:active":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:r,emit:o,slots:i}=t;const l=oe(e,"modelValue"),{themeClasses:n}=je(e),{borderClasses:s}=Dt(e),{colorClasses:d,colorStyles:c,variantClasses:v}=bl(e),{elevationClasses:f}=st(e),p=gl(e,Jt,!1),{roundedClasses:V}=dt(e),{sizeClasses:T}=yl(e),{densityClasses:w}=De(e),x=xl(e,r);function C(k){l.value=!1,o("click:close",k)}return()=>{var k,y;const I=x.isLink.value?"a":e.tag,R=!!(i.append||e.appendIcon||e.appendAvatar),$=!!(i.close||e.closable),E=!!(i.filter||e.filter)&&p,M=!!(i.prepend||e.prependIcon||e.prependAvatar),A=!p||p.isSelected.value,S=!e.disabled&&(!!p||x.isClickable.value||e.link),B=e.link?e.link:p==null?void 0:p.toggle;return l.value&&U(a(I,{class:["v-chip",{"v-chip--disabled":e.disabled,"v-chip--label":e.label,"v-chip--link":S,"v-chip--pill":e.pill},n.value,s.value,A?d.value:void 0,w.value,f.value,V.value,T.value,v.value,p==null?void 0:p.selectedClass.value],style:[A?c.value:void 0],disabled:e.disabled||void 0,draggable:e.draggable,href:x.href.value,onClick:S&&B},{default:()=>[kl(S,"v-chip"),E&&a(Ct,null,{default:()=>[U(a("div",{class:"v-chip__filter"},[i.filter?i.filter():a(ne,{icon:e.filterIcon},null)]),[[J,p.isSelected.value]])]}),M&&a("div",{class:"v-chip__prepend"},[i.prepend?i.prepend():a(bt,{icon:e.prependIcon,image:e.prependAvatar,size:e.size},null)]),(k=(y=i.default)==null?void 0:y.call(i,{isSelected:p==null?void 0:p.isSelected.value,selectedClass:p==null?void 0:p.selectedClass.value,select:p==null?void 0:p.select,toggle:p==null?void 0:p.toggle,value:p==null?void 0:p.value.value,disabled:e.disabled}))!=null?k:e.text,R&&a("div",{class:"v-chip__append"},[i.append?i.append():a(bt,{icon:e.appendIcon,image:e.appendAvatar,size:e.size},null)]),$&&a("div",{class:"v-chip__close",onClick:C},[i.close?i.close({props:{onClick:C}}):a(ne,{icon:e.closeIcon,size:"x-small"},null)])]}),[[Ge("ripple"),S&&e.ripple,null]])}}});const Qt=$e()({name:"VMenu",inheritAttrs:!1,props:h({modelValue:Boolean,id:String},Ue({transition:{component:Ft}})),emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:r,slots:o}=t;const i=oe(e,"modelValue"),{scopeId:l}=Jl(),n=Ve(),s=m(()=>e.id||`v-menu-${n}`),d=G(),c=Me(yt,null);let v=0;it(yt,{register(){++v},unregister(){--v},closeParents(){setTimeout(()=>{v||(i.value=!1,c==null||c.closeParents())},40)}}),Ze(i,p=>{p?c==null||c.register():c==null||c.unregister()});function f(){c==null||c.closeParents()}return ge(()=>a(Ql,ae({ref:d,modelValue:i.value,"onUpdate:modelValue":p=>i.value=p,class:["v-menu"],transition:e.transition,absolute:!0,closeOnContentClick:!0,locationStrategy:"connected",scrollStrategy:"reposition",scrim:!1,openDelay:"300",closeDelay:"250",activatorProps:{"aria-haspopup":"menu","aria-expanded":String(i.value),"aria-owns":s.value},"onClick:outside":f},l,r),{default:o.default,activator:o.activator})),et({id:s},d)}}),Ti=pe(h({chips:Boolean,closableChips:Boolean,eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,menu:Boolean,menuIcon:{type:te,default:"$dropdown"},menuProps:{type:Object},modelValue:{type:null,default:()=>[]},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean},Il({itemChildren:!1})),"select"),fe=$e()({name:"VSelect",props:h(h({},Ti()),Ue({transition:{component:Ft}})),emits:{"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,t){let{slots:r}=t;const{t:o}=Cl(),i=G(),l=oe(e,"menu"),{items:n,transformIn:s,transformOut:d}=wl(e),c=oe(e,"modelValue",[],x=>s(Ce(x)),x=>{var C;const k=d(x);return e.multiple?k:(C=k[0])!=null?C:null}),v=m(()=>c.value.map(x=>n.value.find(C=>C.value===x.value)||x)),f=m(()=>v.value.map(x=>x.props.value));function p(x){c.value=[],e.openOnClear&&(l.value=!0)}function V(){e.hideNoData&&!n.value.length||(l.value=!0)}function T(x){["Enter","ArrowDown"," "].includes(x.key)&&(l.value=!0),["Escape","Tab"].includes(x.key)&&(l.value=!1)}function w(x){if(e.multiple){const C=f.value.findIndex(k=>k===x.value);if(C===-1)c.value=[...c.value,x];else{const k=[...c.value];k.splice(C,1),c.value=k}}else c.value=[x],l.value=!1}return ge(()=>{const x=!!(e.chips||r.chip);return a(we,{ref:i,modelValue:c.value.map(C=>C.props.value).join(", "),"onUpdate:modelValue":C=>{C==null&&(c.value=[])},validationValue:e.modelValue,class:["v-select",{"v-select--active-menu":l.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0}],appendInnerIcon:e.menuIcon,readonly:!0,"onClick:clear":p,"onClick:input":V,"onClick:control":V,onBlur:()=>l.value=!1,onKeydown:T},ce(h({},r),{default:()=>{var C,k;return a(q,null,[a(Qt,ae({modelValue:l.value,"onUpdate:modelValue":y=>l.value=y,activator:"parent",contentClass:"v-select__content",eager:e.eager,openOnClick:!1,closeOnContentClick:!1,transition:e.transition},e.menuProps),{default:()=>[a(Et,{selected:f.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:y=>y.preventDefault()},{default:()=>[!n.value.length&&!e.hideNoData&&((C=(k=r["no-data"])==null?void 0:k.call(r))!=null?C:a(ve,{title:o(e.noDataText)},null)),n.value.map(y=>{var I,R;return(I=(R=r.item)==null?void 0:R.call(r,{item:y,props:ae(y.props,{onClick:()=>w(y)})}))!=null?I:a(ve,ae(y.props,{onClick:()=>w(y)}),{prepend:$=>{let{isSelected:E}=$;return e.multiple?a($i,{modelValue:E,ripple:!1},null):void 0}})})]})]}),v.value.map((y,I)=>{function R(E){E.stopPropagation(),E.preventDefault(),w(y)}const $={"onClick:close":R,modelValue:!0};return a("div",{class:"v-select__selection"},[x?a(Sl,{defaults:{VChip:{closable:e.closableChips,size:"small",text:y.title}}},{default:()=>[r.chip?r.chip({props:$,item:y,index:I}):a(Li,$,null)]}):r.selection?r.selection({item:y,index:I}):a("span",{class:"v-select__selection-text"},[y.title,e.multiple&&I<v.value.length-1&&a("span",{class:"v-select__selection-comma"},[L(",")])])])})])}}))}),et({menu:l,select:w},i)}}),Oi={name:"OperatorTableRowPhase",inject:["operator","type","itemUse"],computed:{maxPhase(){return Object.keys(this.itemUse.phases)[Object.keys(this.itemUse.phases).length-1]},characterPhases(){return[...Array(parseInt(this.maxPhase)+1).keys()].map(e=>({title:`Elite ${e}`,value:e}))},currentPhase:{get(){return this.$store.state.materialPlanner.currentOperator[this.operator.id].phase},set(e){this.$store.dispatch(K,{operatorId:this.operator.id,type:"CURRENT",phase:e})}},targetPhase:{get(){return this.$store.state.materialPlanner.targetOperator[this.operator.id].phase},set(e){this.$store.dispatch(K,{operatorId:this.operator.id,type:"TARGET",phase:e})}}}};function zi(e,t,r,o,i,l){return _(),D("td",null,[U(a(fe,{class:"table-input",label:"Promotion",variant:"outlined",hideDetails:"true",density:"compact",modelValue:l.currentPhase,"onUpdate:modelValue":t[0]||(t[0]=n=>l.currentPhase=n),items:l.characterPhases},null,8,["modelValue","items"]),[[J,l.type==="CURRENT"]]),U(a(fe,{class:"table-input",label:"Promotion",variant:"outlined",hideDetails:"true",density:"compact",modelValue:l.targetPhase,"onUpdate:modelValue":t[1]||(t[1]=n=>l.targetPhase=n),items:l.characterPhases},null,8,["modelValue","items"]),[[J,l.type==="TARGET"]])])}var Ri=P(Oi,[["render",zi]]);const Mi={name:"OperatorTableRowLevel",inject:["operator","type","itemUse"],computed:{maxLevel(){return this.$store.state.gameData.maxLevel},maxCurrentLevel(){let e=this.$store.state.materialPlanner.currentOperator[this.operator.id].phase;return this.maxLevel[this.operator.rarity][e]},maxTargetLevel(){let e=this.$store.state.materialPlanner.targetOperator[this.operator.id].phase;return this.maxLevel[this.operator.rarity][e]},currentLevel:{get(){return this.$store.state.materialPlanner.currentOperator[this.operator.id].level},set(e){this.$store.dispatch(K,{operatorId:this.operator.id,type:"CURRENT",level:e})}},targetLevel:{get(){return this.$store.state.materialPlanner.targetOperator[this.operator.id].level},set(e){this.$store.dispatch(K,{operatorId:this.operator.id,type:"TARGET",level:e})}}}};function Pi(e,t,r,o,i,l){return _(),D("td",null,[U(a(we,{class:"table-input",variant:"outlined",density:"compact",label:"Level",type:"number",modelValue:l.currentLevel,"onUpdate:modelValue":t[0]||(t[0]=n=>l.currentLevel=n),max:l.maxCurrentLevel,min:1,"hide-details":""},null,8,["modelValue","max"]),[[J,l.type==="CURRENT"]]),U(a(we,{class:"table-input",variant:"outlined",density:"compact",label:"Level",type:"number",modelValue:l.targetLevel,"onUpdate:modelValue":t[1]||(t[1]=n=>l.targetLevel=n),max:l.maxTargetLevel,min:1,"hide-details":""},null,8,["modelValue","max"]),[[J,l.type==="TARGET"]])])}var Di=P(Mi,[["render",Pi]]);const Ei={name:"OperatorTableRowSkillLevel",inject:["operator","type","itemUse"],computed:{maxSkilllevel(){return Object.keys(this.itemUse.allSkillLvlup)[Object.keys(Object.keys(this.itemUse.allSkillLvlup)).length-1]},characterSkillLevels(){return[...Array(parseInt(this.maxSkilllevel)).keys()].map(e=>({title:e+1,value:e+1}))},currentSkillLevel:{get(){return this.$store.state.materialPlanner.currentOperator[this.operator.id].skillLevel},set(e){this.$store.dispatch(K,{operatorId:this.operator.id,type:"CURRENT",skillLevel:e})}},targetSkillLevel:{get(){return this.$store.state.materialPlanner.targetOperator[this.operator.id].skillLevel},set(e){this.$store.dispatch(K,{operatorId:this.operator.id,type:"TARGET",skillLevel:e})}}}};function Ai(e,t,r,o,i,l){return _(),D("td",null,[U(a(fe,{class:"table-input",label:"Skill Level",variant:"outlined",hideDetails:"true",density:"compact",modelValue:l.currentSkillLevel,"onUpdate:modelValue":t[0]||(t[0]=n=>l.currentSkillLevel=n),items:l.characterSkillLevels},null,8,["modelValue","items"]),[[J,l.type==="CURRENT"]]),U(a(fe,{class:"table-input",label:"Skill Level",variant:"outlined",hideDetails:"true",density:"compact",modelValue:l.targetSkillLevel,"onUpdate:modelValue":t[1]||(t[1]=n=>l.targetSkillLevel=n),items:l.characterSkillLevels},null,8,["modelValue","items"]),[[J,l.type==="TARGET"]])])}var Fi=P(Ei,[["render",Ai]]);const Bi={name:"OperatorTableRowSkillMastery",props:["skill","index"],inject:["operator","type","itemUse"],computed:{skillLabel(){return`Skill ${this.index+1}`},maxMastery(){return Object.keys(this.skill.levelUpCostCond)[Object.keys(this.skill.levelUpCostCond).length-1]||0},skillMasteryLevels(){return[...Array(parseInt(this.maxMastery)+1).keys()].map(e=>({title:e,value:e}))},currentMastery:{get(){return this.$store.state.materialPlanner.currentOperator[this.operator.id].skillMastery[this.skill.skillId]},set(e){this.$store.dispatch(K,{operatorId:this.operator.id,type:"CURRENT",skillMastery:{id:this.skill.skillId,value:e}})}},targetMastery:{get(){return this.$store.state.materialPlanner.targetOperator[this.operator.id].skillMastery[this.skill.skillId]},set(e){this.$store.dispatch(K,{operatorId:this.operator.id,type:"TARGET",skillMastery:{id:this.skill.skillId,value:e}})}}}};function qi(e,t,r,o,i,l){return _(),D("td",null,[U(a(fe,{class:"table-input",label:l.skillLabel,variant:"outlined",hideDetails:"true",density:"compact",modelValue:l.currentMastery,"onUpdate:modelValue":t[0]||(t[0]=n=>l.currentMastery=n),items:l.skillMasteryLevels},null,8,["label","modelValue","items"]),[[J,l.type==="CURRENT"]]),U(a(fe,{class:"table-input",label:l.skillLabel,variant:"outlined",hideDetails:"true",density:"compact",modelValue:l.targetMastery,"onUpdate:modelValue":t[1]||(t[1]=n=>l.targetMastery=n),items:l.skillMasteryLevels},null,8,["label","modelValue","items"]),[[J,l.type==="TARGET"]])])}var Ui=P(Bi,[["render",qi]]);const Ni={name:"OperatorTableRowEquipment",props:["index","equipmentId","equipmentLevels"],inject:["operator","type","itemUse"],computed:{equipmentLabel(){return`Module ${this.index+1}`},maxLevel(){return this.equipmentLevels[this.equipmentLevels.length-1]||0},equipmentLevelOptions(){return this.equipmentLevels.map(e=>({title:e,value:e}))},currentLevel:{get(){return this.$store.state.materialPlanner.currentOperator[this.operator.id].modules[this.equipmentId]},set(e){this.$store.dispatch(K,{operatorId:this.operator.id,type:"CURRENT",modules:{id:this.equipmentId,value:e}})}},targetLevel:{get(){return this.$store.state.materialPlanner.targetOperator[this.operator.id].modules[this.equipmentId]},set(e){this.$store.dispatch(K,{operatorId:this.operator.id,type:"TARGET",modules:{id:this.equipmentId,value:e}})}}}};function ji(e,t,r,o,i,l){return _(),D("td",null,[U(a(fe,{class:"table-input",label:l.equipmentLabel,variant:"outlined",hideDetails:"true",density:"compact",modelValue:l.currentLevel,"onUpdate:modelValue":t[0]||(t[0]=n=>l.currentLevel=n),items:l.equipmentLevelOptions},null,8,["label","modelValue","items"]),[[J,l.type==="CURRENT"]]),U(a(fe,{class:"table-input",label:l.equipmentLabel,variant:"outlined",hideDetails:"true",density:"compact",modelValue:l.targetLevel,"onUpdate:modelValue":t[1]||(t[1]=n=>l.targetLevel=n),items:l.equipmentLevelOptions},null,8,["label","modelValue","items"]),[[J,l.type==="TARGET"]])])}var Gi=P(Ni,[["render",ji]]);const Ki={name:"MaxMinButton",emits:["set"]},Wi=L(" SET "),Hi=L("MAX"),Yi=L("MIN");function Xi(e,t,r,o,i,l){return _(),z(Qt,{"offset-y":""},{activator:u(({props:n})=>[a(Y,ae(n,{variant:"outlined"}),{default:u(()=>[Wi]),_:2},1040)]),default:u(()=>[a(Et,null,{default:u(()=>[a(ve,{onClick:t[0]||(t[0]=n=>this.$emit("set","MAX"))},{default:u(()=>[a(Ie,null,{default:u(()=>[Hi]),_:1})]),_:1}),a(ve,{onClick:t[1]||(t[1]=n=>this.$emit("set","MIN"))},{default:u(()=>[a(Ie,null,{default:u(()=>[Yi]),_:1})]),_:1})]),_:1})]),_:1})}var Zt=P(Ki,[["render",Xi]]);const Ji={name:"OperatorTableRow",props:["operator","selected"],emits:["selectOperator"],inject:["type"],computed:{imgSrc(){return`${be}/images/avatar/${this.operator.id}.png`},itemUse(){return this.$store.state.itemUseByCharacterId[this.operator.id]},maxLevel(){return this.$store.state.gameData.maxLevel},maxCurrentLevel(){let e=this.$store.state.materialPlanner.currentOperator[this.operatorId].phase;return this.maxLevel[this.operator.rarity][e]},maxTargetLevel(){let e=this.$store.state.materialPlanner.targetOperator[this.operatorId].phase;return this.maxLevel[this.operator.rarity][e]},isSelected:{get(){return this.selected},set(){this.$store.dispatch(Vl,this.operator.id)}},modules(){return Object.entries(this.itemUse.modules).reduce((e,[t,r])=>(Object.keys(r).length>0&&e.push({id:t,levels:Object.keys(r)}),e),[])}},methods:{setPlan(e){this.$store.dispatch($l,{operatorId:this.operator.id,type:this.type,value:e})}},provide(){return{operator:m(()=>this.operator),itemUse:m(()=>this.itemUse)}},components:{OperatorTableRowPhase:Ri,OperatorTableRowLevel:Di,OperatorTableRowSkillLevel:Fi,OperatorTableRowSkillMastery:Ui,OperatorTableRowEquipment:Gi,MaxMinButton:Zt}},Qi=["src"],Zi={class:"operator-name"};function er(e,t,r,o,i,l){const n=O("OperatorTableRowPhase"),s=O("OperatorTableRowLevel"),d=O("OperatorTableRowSkillLevel"),c=O("OperatorTableRowSkillMastery"),v=O("OperatorTableRowEquipment"),f=O("MaxMinButton");return _(),D("tr",null,[g("td",null,[U(g("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=p=>l.isSelected=p)},null,512),[[Ll,l.isSelected]])]),g("td",null,[g("div",{class:"operator-row",onClick:t[1]||(t[1]=p=>this.$emit("selectOperator",r.operator.id))},[g("img",{src:l.imgSrc,class:"operator-img"},null,8,Qi),g("p",Zi,he(r.operator.appellation),1)])]),l.isSelected?(_(),D(q,{key:0},[a(n),a(s),a(d),(_(!0),D(q,null,ee(l.itemUse.skills,(p,V,T)=>(_(),z(c,{key:T,skill:p,index:T},null,8,["skill","index"]))),128)),(_(!0),D(q,null,ee(l.modules,(p,V)=>(_(),z(v,{key:V,index:V,equipmentId:p.id,equipmentLevels:p.levels},null,8,["index","equipmentId","equipmentLevels"]))),128))],64)):Be("",!0),g("td",null,[a(f,{onSet:l.setPlan},null,8,["onSet"])])])}var tr=P(Ji,[["render",er],["__scopeId","data-v-476bfbcf"]]);const vt=Symbol.for("vuetify:v-slider");function lr(e,t,r){const o=r==="vertical",i=t.getBoundingClientRect(),l="touches"in e?e.touches[0]:e;return o?l.clientY-(i.top+i.height/2):l.clientX-(i.left+i.width/2)}function ar(e,t){return"touches"in e&&e.touches.length?e.touches[0][t]:"changedTouches"in e&&e.changedTouches.length?e.changedTouches[0][t]:e[t]}const ir=pe(h(h({disabled:Boolean,error:Boolean,readonly:Boolean,max:{type:[Number,String],default:100},min:{type:[Number,String],default:0},step:{type:[Number,String],default:0},thumbColor:String,thumbLabel:{type:[Boolean,String],default:void 0,validator:e=>typeof e=="boolean"||e==="always"},thumbSize:{type:[Number,String],default:20},showTicks:{type:[Boolean,String],default:!1,validator:e=>typeof e=="boolean"||e==="always"},ticks:{type:[Array,Object]},tickSize:{type:[Number,String],default:2},color:String,trackColor:String,trackFillColor:String,trackSize:{type:[Number,String],default:4},direction:{type:String,default:"horizontal",validator:e=>["vertical","horizontal"].includes(e)},reverse:Boolean},ot()),nt({elevation:2})),"slider"),rr=e=>{let{props:t,handleSliderMouseUp:r,handleMouseMove:o,getActiveThumb:i}=e;const{isRtl:l}=Tl(),n=m(()=>l.value!==t.reverse),s=m(()=>{let b=l.value?"rtl":"ltr";return t.reverse&&(b=b==="rtl"?"ltr":"rtl"),b}),d=m(()=>parseFloat(t.min)),c=m(()=>parseFloat(t.max)),v=m(()=>t.step>0?parseFloat(t.step):0),f=m(()=>{const b=v.value.toString().trim();return b.includes(".")?b.length-b.indexOf(".")-1:0}),p=m(()=>parseInt(t.thumbSize,10)),V=m(()=>parseInt(t.tickSize,10)),T=m(()=>parseInt(t.trackSize,10)),w=m(()=>(c.value-d.value)/v.value),x=N(t,"disabled"),C=m(()=>t.direction==="vertical"),k=m(()=>{var b;return t.error||t.disabled?void 0:(b=t.thumbColor)!=null?b:t.color}),y=m(()=>{var b;return t.error||t.disabled?void 0:(b=t.trackColor)!=null?b:t.color}),I=m(()=>{var b;return t.error||t.disabled?void 0:(b=t.trackFillColor)!=null?b:t.color}),R=G(!1),$=G(0),E=G(),M=G();function A(b){if(v.value<=0)return b;const re=gt(b,d.value,c.value),ke=d.value%v.value,He=Math.round((re-ke)/v.value)*v.value+ke;return parseFloat(Math.min(He,c.value).toFixed(f.value))}function S(b){var re;const ke=t.direction==="vertical",He=ke?"top":"left",el=ke?"height":"width",tl=ke?"clientY":"clientX",{[He]:ll,[el]:al}=(re=E.value)==null?void 0:re.$el.getBoundingClientRect(),il=ar(b,tl);let Ye=Math.min(Math.max((il-ll-$.value)/al,0),1)||0;return(ke||n.value)&&(Ye=1-Ye),A(d.value+Ye*(c.value-d.value))}let B=!1;const W=b=>{B||($.value=0,r(S(b))),R.value=!1,B=!1,$.value=0},Q=b=>{M.value=i(b),M.value&&(M.value.focus(),R.value=!0,M.value.contains(b.target)?(B=!0,$.value=lr(b,M.value,t.direction)):($.value=0,o(S(b))))},Z={passive:!0,capture:!0};function H(b){B=!0,o(S(b))}function F(b){b.stopPropagation(),b.preventDefault(),W(b),window.removeEventListener("mousemove",H,Z),window.removeEventListener("mouseup",F)}function j(b){b.stopPropagation(),b.preventDefault(),W(b),window.removeEventListener("touchmove",H,Z),window.removeEventListener("touchend",j)}function se(b){Q(b),window.addEventListener("touchmove",H,Z),window.addEventListener("touchend",j,{passive:!1})}function me(b){b.preventDefault(),Q(b),window.addEventListener("mousemove",H,Z),window.addEventListener("mouseup",F,{passive:!1})}const de=b=>{const re=(b-d.value)/(c.value-d.value)*100;return gt(isNaN(re)?0:re,0,100)},ye=m(()=>t.ticks?Array.isArray(t.ticks)?t.ticks.map(b=>({value:b,position:de(b),label:b.toString()})):Object.keys(t.ticks).map(b=>({value:parseInt(b,10),position:de(parseInt(b,10)),label:t.ticks[b]})):w.value!==1/0?Ol(w.value+1).map(b=>{const re=d.value+b*v.value;return{value:re,position:de(re)}}):[]),xe=m(()=>ye.value.some(b=>{let{label:re}=b;return!!re})),pt={activeThumbRef:M,color:N(t,"color"),decimals:f,disabled:x,direction:N(t,"direction"),elevation:N(t,"elevation"),hasLabels:xe,horizontalDirection:s,isReversed:n,min:d,max:c,mousePressed:R,numTicks:w,onSliderMousedown:me,onSliderTouchstart:se,parsedTicks:ye,parseMouseMove:S,position:de,readonly:N(t,"readonly"),rounded:N(t,"rounded"),roundValue:A,showTicks:N(t,"showTicks"),startOffset:$,step:v,thumbSize:p,thumbColor:k,thumbLabel:N(t,"thumbLabel"),ticks:N(t,"ticks"),tickSize:V,trackColor:y,trackContainerRef:E,trackFillColor:I,trackSize:T,vertical:C};return it(vt,pt),pt},nr=ie({name:"VSliderThumb",directives:{Ripple:rt},props:{focused:Boolean,max:{type:Number,required:!0},min:{type:Number,required:!0},modelValue:{type:Number,required:!0},position:{type:Number,required:!0}},emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:r,emit:o}=t;const i=Me(vt);if(!i)throw new Error("[Vuetify] v-slider-thumb must be used inside v-slider or v-range-slider");const{thumbColor:l,step:n,vertical:s,disabled:d,thumbSize:c,thumbLabel:v,direction:f,readonly:p,elevation:V,isReversed:T,horizontalDirection:w,mousePressed:x,decimals:C}=i,{textColorClasses:k,textColorStyles:y}=Ne(l),{pageup:I,pagedown:R,end:$,home:E,left:M,right:A,down:S,up:B}=Rl,W=[I,R,$,E,M,A,S,B],Q=m(()=>n.value?[1,2,3]:[1,5,10]);function Z(F,j){if(!W.includes(F.key))return;F.preventDefault();const se=n.value||.1,me=(e.max-e.min)/se;if([M,A,S,B].includes(F.key)){const ye=(T.value?[M,B]:[A,B]).includes(F.key)?1:-1,xe=F.shiftKey?2:F.ctrlKey?1:0;j=j+ye*se*Q.value[xe]}else if(F.key===E)j=e.min;else if(F.key===$)j=e.max;else{const de=F.key===R?1:-1;j=j-de*se*(me>100?me/10:10)}return Math.max(e.min,Math.min(e.max,j))}function H(F){const j=Z(F,e.modelValue);j!=null&&o("update:modelValue",j)}return()=>{var F,j;const se=ue(s.value?100-e.position:e.position,"%"),me=s.value?"block":"inline",{elevationClasses:de}=st(m(()=>d.value?void 0:V.value));return a("div",{class:["v-slider-thumb",{"v-slider-thumb--focused":e.focused,"v-slider-thumb--pressed":e.focused&&x.value}],style:{[`inset-${me}-start`]:`calc(${se} - var(--v-slider-thumb-size) / 2)`,"--v-slider-thumb-size":ue(c.value),direction:s.value?void 0:w.value},role:"slider",tabindex:d.value?-1:0,"aria-valuemin":e.min,"aria-valuemax":e.max,"aria-valuenow":e.modelValue,"aria-readonly":p.value,"aria-orientation":f.value,onKeydown:p.value?void 0:H},[a("div",{class:["v-slider-thumb__surface",k.value,de.value],style:h({},y.value)},null),U(a("div",{class:["v-slider-thumb__ripple",k.value],style:y.value},null),[[Ge("ripple"),!0,null,{circle:!0,center:!0}]]),a(zl,{origin:"bottom center"},{default:()=>[U(a("div",{class:"v-slider-thumb__label-container"},[a("div",{class:["v-slider-thumb__label"]},[a("div",null,[(F=(j=r["thumb-label"])==null?void 0:j.call(r,{modelValue:e.modelValue}))!=null?F:e.modelValue.toFixed(n.value?C.value:1)])])]),[[J,v.value&&e.focused||v.value==="always"]])]})])}}});const or=ie({name:"VSliderTrack",props:{start:{type:Number,required:!0},stop:{type:Number,required:!0}},emits:{},setup(e,t){let{slots:r}=t;const o=Me(vt);if(!o)throw new Error("[Vuetify] v-slider-track must be inside v-slider or v-range-slider");const{trackColor:i,trackFillColor:l,vertical:n,tickSize:s,showTicks:d,trackSize:c,color:v,rounded:f,parsedTicks:p,horizontalDirection:V}=o,{roundedClasses:T}=dt(f),{backgroundColorClasses:w,backgroundColorStyles:x}=Fe(l),{backgroundColorClasses:C,backgroundColorStyles:k}=Fe(i),y=m(()=>`inset-${n.value?"block-end":"inline-start"}`),I=m(()=>n.value?"height":"width"),R=m(()=>({[y.value]:"0%",[I.value]:"100%"})),$=m(()=>e.stop-e.start),E=m(()=>({[y.value]:ue(e.start,"%"),[I.value]:ue($.value,"%")})),M=m(()=>(n.value?p.value.slice().reverse():p.value).map((S,B)=>{var W,Q;const Z=n.value?"bottom":"margin-inline-start",H=S.position>0&&S.position<100?ue(S.position,"%"):void 0;return a("div",{key:S.value,class:["v-slider-track__tick",{"v-slider-track__tick--filled":S.position>=e.start&&S.position<=e.stop}],style:{[Z]:H}},[(S.label||r["tick-label"])&&a("div",{class:"v-slider-track__tick-label"},[(W=(Q=r["tick-label"])==null?void 0:Q.call(r,{tick:S,index:B}))!=null?W:S.label])])}));return()=>a("div",{class:["v-slider-track",T.value],style:{"--v-slider-track-size":ue(c.value),"--v-slider-tick-size":ue(s.value),direction:n.value?void 0:V.value}},[a("div",{class:["v-slider-track__background",C.value,{"v-slider-track__background--opacity":!!v.value||!l.value}],style:h(h({},R.value),k.value)},null),a("div",{class:["v-slider-track__fill",w.value],style:h(h({},E.value),x.value)},null),d.value&&a("div",{class:["v-slider-track__ticks",{"v-slider-track__ticks--always-show":d.value==="always"}]},[M.value])])}}),_e=ie({name:"VSlider",props:ce(h(h(h({},jt()),ir()),ut()),{modelValue:{type:[Number,String],default:0}}),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:r,slots:o}=t;const i=G(),{min:l,max:n,mousePressed:s,roundValue:d,onSliderMousedown:c,onSliderTouchstart:v,trackContainerRef:f,position:p,hasLabels:V,readonly:T}=rr({props:e,handleSliderMouseUp:I=>w.value=d(I),handleMouseMove:I=>w.value=d(I),getActiveThumb:()=>{var I;return(I=i.value)==null?void 0:I.$el}}),w=oe(e,"modelValue",void 0,I=>{const R=typeof I=="string"?parseFloat(I):I==null?l.value:I;return d(R)}),{isFocused:x,focus:C,blur:k}=Gt(e),y=m(()=>p(w.value));return()=>{const[I,R]=Ut(e);return a(ct,ae({class:["v-slider",{"v-slider--has-labels":!!o["tick-label"]||V.value,"v-slider--focused":x.value,"v-slider--pressed":s.value,"v-slider--disabled":e.disabled}]},I,{focused:x.value}),ce(h({},o),{default:$=>{let{id:E}=$;return a("div",{class:"v-slider__container",onMousedown:T.value?void 0:c,onTouchstartPassive:T.value?void 0:v},[a("input",{id:E.value,name:e.name||E.value,disabled:e.disabled,readonly:e.readonly,tabindex:"-1",value:w.value},null),a(or,{ref:f,start:0,stop:y.value},{"tick-label":o["tick-label"]}),a(nr,{ref:i,focused:x.value,min:l.value,max:n.value,modelValue:w.value,"onUpdate:modelValue":M=>w.value=M,position:y.value,elevation:e.elevation,onFocus:C,onBlur:k},{"thumb-label":o["thumb-label"]})])}}))}}}),sr={name:"OperatorDialogPhase",props:["operator-id"],data(){return{}},computed:{itemUse(){return this.$store.state.itemUseByCharacterId[this.operatorId]},maxPhase(){return Object.keys(this.itemUse.phases)[Object.keys(this.itemUse.phases).length-1]},phaseLabels(){return[...Array(parseInt(this.maxPhase)+1).keys()].reduce((e,t)=>(e[t]=`Elite ${t}`,e),{})},currentPhase:{get(){return this.$store.state.materialPlanner.currentOperator[this.operatorId].phase},set(e){this.$store.dispatch(K,{operatorId:this.operatorId,type:"CURRENT",phase:e})}},targetPhase:{get(){return this.$store.state.materialPlanner.targetOperator[this.operatorId].phase},set(e){this.$store.dispatch(K,{operatorId:this.operatorId,type:"TARGET",phase:e})}}}},dr=L("Promotion"),ur=g("p",{class:"d-flex d-sm-none"},"Current",-1),cr=g("p",{class:"d-flex d-sm-none"},"Target",-1);function vr(e,t,r,o,i,l){return _(),z(Te,{class:"mt-0 mt-sm-4"},{default:u(()=>[a(X,{cols:"12",sm:"2"},{default:u(()=>[dr]),_:1}),a(X,{cols:"12",sm:"5"},{default:u(()=>[ur,a(_e,{modelValue:l.currentPhase,"onUpdate:modelValue":t[0]||(t[0]=n=>l.currentPhase=n),"hide-details":"",ticks:l.phaseLabels,max:l.maxPhase,step:"1","show-ticks":"always"},null,8,["modelValue","ticks","max"])]),_:1}),a(X,{cols:"12",sm:"5"},{default:u(()=>[cr,a(_e,{modelValue:l.targetPhase,"onUpdate:modelValue":t[1]||(t[1]=n=>l.targetPhase=n),"hide-details":"",ticks:l.phaseLabels,max:l.maxPhase,step:"1","show-ticks":"always"},null,8,["modelValue","ticks","max"])]),_:1})]),_:1})}var pr=P(sr,[["render",vr]]);const mr={name:"OperatorDialogLevel",props:["operator-id"],data(){return{}},computed:{operator(){return this.$store.state.character.characterDataById[this.operatorId]},maxLevel(){return this.$store.state.gameData.maxLevel},maxCurrentLevel(){let e=this.$store.state.materialPlanner.currentOperator[this.operatorId].phase;return this.maxLevel[this.operator.rarity][e]},maxTargetLevel(){let e=this.$store.state.materialPlanner.targetOperator[this.operatorId].phase;return this.maxLevel[this.operator.rarity][e]},currentLevel:{get(){return this.$store.state.materialPlanner.currentOperator[this.operatorId].level},set(e){this.$store.dispatch(K,{operatorId:this.operatorId,type:"CURRENT",level:e})}},targetLevel:{get(){return this.$store.state.materialPlanner.targetOperator[this.operatorId].level},set(e){this.$store.dispatch(K,{operatorId:this.operatorId,type:"TARGET",level:e})}}}},hr=L("Level");function fr(e,t,r,o,i,l){return _(),z(Te,{class:"mt-0 mt-sm-4"},{default:u(()=>[a(X,{cols:"12",sm:"2"},{default:u(()=>[hr]),_:1}),a(X,{cols:"12",sm:"5"},{default:u(()=>[a(we,{label:"Current",type:"number",modelValue:l.currentLevel,"onUpdate:modelValue":t[0]||(t[0]=n=>l.currentLevel=n),max:l.maxCurrentLevel,min:1,"hide-details":""},null,8,["modelValue","max"])]),_:1}),a(X,{cols:"12",sm:"5"},{default:u(()=>[a(we,{label:"Target",type:"number",modelValue:l.targetLevel,"onUpdate:modelValue":t[1]||(t[1]=n=>l.targetLevel=n),max:l.maxTargetLevel,min:1,"hide-details":""},null,8,["modelValue","max"])]),_:1})]),_:1})}var _r=P(mr,[["render",fr]]);const br={name:"OperatorDialogSkillLevel",props:["operator-id"],data(){return{}},computed:{itemUse(){return this.$store.state.itemUseByCharacterId[this.operatorId]},maxSkilllevel(){return Object.keys(this.itemUse.allSkillLvlup)[Object.keys(Object.keys(this.itemUse.allSkillLvlup)).length-1]},skillLevelLabels(){return[...Array(parseInt(this.maxSkilllevel)).keys()].reduce((e,t)=>(e[t+1]=parseInt(t)+1,e),{})},currentSkillLevel:{get(){return this.$store.state.materialPlanner.currentOperator[this.operatorId].skillLevel},set(e){this.$store.dispatch(K,{operatorId:this.operatorId,type:"CURRENT",skillLevel:e})}},targetSkillLevel:{get(){return this.$store.state.materialPlanner.targetOperator[this.operatorId].skillLevel},set(e){this.$store.dispatch(K,{operatorId:this.operatorId,type:"TARGET",skillLevel:e})}}}},gr=L("Skill Level"),yr=g("p",{class:"d-flex d-sm-none"},"Current",-1),xr=g("p",{class:"d-flex d-sm-none"},"Target",-1);function kr(e,t,r,o,i,l){return _(),z(Te,{class:"mt-4"},{default:u(()=>[a(X,{cols:"12",sm:"2"},{default:u(()=>[gr]),_:1}),a(X,{cols:"12",sm:"5"},{default:u(()=>[yr,a(_e,{modelValue:l.currentSkillLevel,"onUpdate:modelValue":t[0]||(t[0]=n=>l.currentSkillLevel=n),"hide-details":"",ticks:l.skillLevelLabels,min:1,max:l.maxSkilllevel,step:"1","show-ticks":"always"},null,8,["modelValue","ticks","max"])]),_:1}),a(X,{cols:"12",sm:"5"},{default:u(()=>[xr,a(_e,{modelValue:l.targetSkillLevel,"onUpdate:modelValue":t[1]||(t[1]=n=>l.targetSkillLevel=n),"hide-details":"",ticks:l.skillLevelLabels,min:1,max:l.maxSkilllevel,step:"1","show-ticks":"always"},null,8,["modelValue","ticks","max"])]),_:1})]),_:1})}var Ir=P(br,[["render",kr]]);const Cr={props:["operatorId","skill"],data(){return{}},computed:{imgSrc(){return`${be}/images/skills/skill_icon_${this.skill.skillId}.png`},maxMastery(){return Object.keys(this.skill.levelUpCostCond)[Object.keys(this.skill.levelUpCostCond).length-1]||0},masteryLabels(){return[...Array(parseInt(this.maxMastery)+1).keys()].reduce((e,t)=>(e[t]=`${t}`,e),{})},currentMastery:{get(){return this.$store.state.materialPlanner.currentOperator[this.operatorId].skillMastery[this.skill.skillId]},set(e){this.$store.dispatch(K,{operatorId:this.operatorId,type:"CURRENT",skillMastery:{id:this.skill.skillId,value:e}})}},targetMastery:{get(){return this.$store.state.materialPlanner.targetOperator[this.operatorId].skillMastery[this.skill.skillId]},set(e){this.$store.dispatch(K,{operatorId:this.operatorId,type:"TARGET",skillMastery:{id:this.skill.skillId,value:e}})}}}},wr=g("p",{class:"d-flex d-sm-none"},"Current Mastery Rank",-1),Sr=g("p",{class:"d-flex d-sm-none"},"Target Mastery Rank",-1);function Vr(e,t,r,o,i,l){return _(),z(Te,{class:"mt-4 align-center"},{default:u(()=>[a(X,{cols:"12",sm:"2"},{default:u(()=>[a(lt,{src:l.imgSrc,width:"64px",class:"ma-auto"},null,8,["src"])]),_:1}),a(X,{cols:"12",sm:"5"},{default:u(()=>[wr,a(_e,{modelValue:l.currentMastery,"onUpdate:modelValue":t[0]||(t[0]=n=>l.currentMastery=n),"hide-details":"",ticks:l.masteryLabels,min:0,max:l.maxMastery,step:"1","show-ticks":"always"},null,8,["modelValue","ticks","max"])]),_:1}),a(X,{cols:"12",sm:"5"},{default:u(()=>[Sr,a(_e,{modelValue:l.targetMastery,"onUpdate:modelValue":t[1]||(t[1]=n=>l.targetMastery=n),"hide-details":"",ticks:l.masteryLabels,min:0,max:l.maxMastery,step:"1","show-ticks":"always"},null,8,["modelValue","ticks","max"])]),_:1})]),_:1})}var $r=P(Cr,[["render",Vr]]);const Lr={name:"OperatorDialogSkillMastery",props:["operator-id"],data(){return{}},computed:{itemUse(){return this.$store.state.itemUseByCharacterId[this.operatorId]}},components:{OperatorDialogSkillMasterySlider:$r}};function Tr(e,t,r,o,i,l){const n=O("OperatorDialogSkillMasterySlider");return _(!0),D(q,null,ee(Object.values(l.itemUse.skills),(s,d)=>(_(),z(n,{key:d,skill:s,operatorId:e.operatorId},null,8,["skill","operatorId"]))),128)}var Or=P(Lr,[["render",Tr]]);const zr={name:"OperatorDialogEquipmentSlider",props:["operatorId","equipmentId","equipmentLevels"],data(){return{}},computed:{equipment(){return this.$store.state.equipmentDataById[this.equipmentId]},imgSrc(){return`${be}/images/equipments/${this.equipment.uniEquipIcon==="original"?"default":this.equipment.uniEquipIcon}.png`},maxLevel(){return Object.keys(this.equipmentLevels)[Object.keys(this.equipmentLevels).length-1]||0},levelLabels(){return[...Array(parseInt(this.maxLevel)+1).keys()].reduce((e,t)=>(e[t]=`${t}`,e),{})},currentLevel:{get(){return this.$store.state.materialPlanner.currentOperator[this.operatorId].modules[this.equipmentId]},set(e){this.$store.dispatch(K,{operatorId:this.operatorId,type:"CURRENT",modules:{id:this.equipmentId,value:e}})}},targetLevel:{get(){return this.$store.state.materialPlanner.targetOperator[this.operatorId].modules[this.equipmentId]},set(e){this.$store.dispatch(K,{operatorId:this.operatorId,type:"TARGET",modules:{id:this.equipmentId,value:e}})}}}},Rr=g("p",{class:"d-flex d-sm-none"},"Current Module Level",-1),Mr=g("p",{class:"d-flex d-sm-none"},"Target Module Level",-1);function Pr(e,t,r,o,i,l){return _(),z(Te,{class:"mt-4 align-center"},{default:u(()=>[a(X,{cols:"12",sm:"2"},{default:u(()=>[a(lt,{src:l.imgSrc,width:"100%",class:"ma-auto"},null,8,["src"])]),_:1}),a(X,{cols:"12",sm:"5"},{default:u(()=>[Rr,a(_e,{modelValue:l.currentLevel,"onUpdate:modelValue":t[0]||(t[0]=n=>l.currentLevel=n),ticks:l.levelLabels,"hide-details":"",min:0,max:l.maxLevel,step:"1","show-ticks":"always"},null,8,["modelValue","ticks","max"])]),_:1}),a(X,{cols:"12",sm:"5"},{default:u(()=>[Mr,a(_e,{modelValue:l.targetLevel,"onUpdate:modelValue":t[1]||(t[1]=n=>l.targetLevel=n),ticks:l.levelLabels,"hide-details":"",min:0,max:l.maxLevel,step:"1","show-ticks":"always"},null,8,["modelValue","ticks","max"])]),_:1})]),_:1})}var Dr=P(zr,[["render",Pr]]);const Er={name:"OperatorDialogEquipment",props:["operator-id"],data(){return{}},computed:{itemUse(){return this.$store.state.itemUseByCharacterId[this.operatorId]}},components:{OperatorDialogEquipmentSlider:Dr}};function Ar(e,t,r,o,i,l){const n=O("OperatorDialogEquipmentSlider");return _(!0),D(q,null,ee(l.itemUse.modules,(s,d,c)=>(_(),z(n,{key:c,operatorId:e.operatorId,equipmentId:d,equipmentLevels:s},null,8,["operatorId","equipmentId","equipmentLevels"]))),128)}var Fr=P(Er,[["render",Ar]]);const Br={props:["id"],emits:["close"],computed:{operator(){return this.$store.state.character.characterDataById[this.id]}},components:{OperatorDialogPhase:pr,OperatorDialogLevel:_r,OperatorDialogSkillLevel:Ir,OperatorDialogSkillMastery:Or,OperatorDialogEquipment:Fr}},qr=L("mdi-close"),Ur=g("p",null,"Current",-1),Nr=g("p",null,"Target",-1);function jr(e,t,r,o,i,l){const n=O("OperatorDialogPhase"),s=O("OperatorDialogLevel"),d=O("OperatorDialogSkillLevel"),c=O("OperatorDialogSkillMastery"),v=O("OperatorDialogEquipment");return _(),z(We,{fullscreen:"",scrollable:"",class:"dialog"},{default:u(()=>[a(Le,null,{default:u(()=>[a($t,null,{default:u(()=>[a(Y,{icon:"",dark:"",onClick:t[0]||(t[0]=f=>this.$emit("close"))},{default:u(()=>[a(ne,null,{default:u(()=>[qr]),_:1})]),_:1}),a(Lt,null,{default:u(()=>[L(he(l.operator.appellation),1)]),_:1})]),_:1}),a(qe,{class:"dialog-container"},{default:u(()=>[a(Te,{class:"d-none d-sm-flex"},{default:u(()=>[a(Zl),a(X,{cols:"5",class:"text-center"},{default:u(()=>[Ur]),_:1}),a(X,{cols:"5",class:"text-center"},{default:u(()=>[Nr]),_:1})]),_:1}),a(le,{class:"d-none d-sm-flex mt-4"}),a(n,{operatorId:r.id},null,8,["operatorId"]),a(le,{class:"my-4"}),a(s,{operatorId:r.id},null,8,["operatorId"]),a(le,{class:"my-4"}),a(d,{operatorId:r.id},null,8,["operatorId"]),a(le,{class:"my-4"}),a(c,{operatorId:r.id},null,8,["operatorId"]),a(le,{class:"my-4"}),a(v,{operatorId:r.id},null,8,["operatorId"])]),_:1})]),_:1})]),_:1})}var Gr=P(Br,[["render",jr]]);const Kr={name:"OperatorTable",inject:["operators"],data(){return{type:"CURRENT",showFilterDialog:!1,showOperatorDialog:!1,selectedOperatorId:null,filter:{filterClass:"ALL",filterSubClass:"ALL",filterRarity:"ALL",filterSelection:"ALL"}}},computed:{filteredOperators(){return this.operators.filter(e=>{const t=this.filter.filterClass==="ALL"?!0:e.profession===this.filter.filterClass,r=this.filter.filterSubClass==="ALL"?!0:e.subProfessionId===this.filter.filterSubClass,o=this.filter.filterRarity==="ALL"?!0:e.rarity===this.filter.filterRarity,i=this.filter.filterSelection==="ALL"?!0:this.selectedOperatorIds.includes(e.id);return t&&r&&o&&i})},selectedOperatorIds(){return this.$store.state.materialPlanner.selectedOperatorIds}},methods:{selectOperator(e){this.selectedOperatorId=e,this.showOperatorDialog=!0},closeFilterDialog(e){this.filter=e},setAllFiltered(e){this.$store.dispatch(Ml,{operatorIds:this.selectedOperatorIds,type:this.type,value:e})}},provide(){return{type:m(()=>this.type)}},components:{OperatorTableRow:tr,OperatorFilterDialog:Ci,OperatorDialog:Gr,MaxMinButton:Zt}},Wr=L("CURRENT"),Hr=L("TARGET"),Yr=g("th",null,null,-1),Xr=L("filter"),Jr=g("th",{class:"text-center"},"Promotion",-1),Qr=g("th",{class:"text-center"},"Level",-1),Zr=g("th",{class:"text-center"},"Skill level",-1),en=g("th",{colspan:"3",class:"text-center"},"Skill Mastery",-1),tn=g("th",{colspan:"2",class:"text-center"},"Modules",-1);function ln(e,t,r,o,i,l){const n=O("MaxMinButton"),s=O("OperatorTableRow"),d=O("OperatorFilterDialog"),c=O("OperatorDialog");return _(),z(tt,null,{default:u(()=>[a(Re,{modelValue:i.type,"onUpdate:modelValue":t[0]||(t[0]=v=>i.type=v),color:"info",density:"compact",class:"w-100 rounded-0"},{default:u(()=>[a(Y,{value:"CURRENT",class:"w-50 rounded-0"},{default:u(()=>[Wr]),_:1}),a(Y,{value:"TARGET",class:"w-50 rounded-0"},{default:u(()=>[Hr]),_:1})]),_:1},8,["modelValue"]),a(Ht,{height:"calc(100vh - 48px - 32px - 36px - 40px)"},{default:u(()=>[g("thead",null,[g("tr",null,[Yr,g("th",null,[a(Y,{density:"compact",variant:"outlined",onClick:t[1]||(t[1]=v=>i.showFilterDialog=!0)},{default:u(()=>[Xr]),_:1})]),Jr,Qr,Zr,en,tn,g("th",null,[a(n,{onSet:l.setAllFiltered},null,8,["onSet"])])])]),g("tbody",null,[(_(!0),D(q,null,ee(l.filteredOperators,(v,f)=>(_(),z(s,{key:f,operator:v,selected:l.selectedOperatorIds.includes(v.id),onSelectOperator:l.selectOperator},null,8,["operator","selected","onSelectOperator"]))),128))])]),_:1}),a(d,{modelValue:i.showFilterDialog,"onUpdate:modelValue":t[2]||(t[2]=v=>i.showFilterDialog=v),filter:i.filter,onClose:l.closeFilterDialog},null,8,["modelValue","filter","onClose"]),a(c,{modelValue:i.showOperatorDialog,"onUpdate:modelValue":t[3]||(t[3]=v=>i.showOperatorDialog=v),id:i.selectedOperatorId,onClose:t[4]||(t[4]=v=>i.showOperatorDialog=!1)},null,8,["modelValue","id"])]),_:1})}var an=P(Kr,[["render",ln]]);const rn={name:"MaterialPlannerOperators",components:{OperatorTable:an}};function nn(e,t,r,o,i,l){const n=O("OperatorTable");return _(),z(n)}var on=P(rn,[["render",nn]]);const sn=ie({name:"VBottomNavigation",props:h(h(h(h(h(h(h(h({bgColor:String,color:String,grow:Boolean,mode:{type:String,validator:e=>!e||["horizontal","shift"].includes(e)},height:{type:[Number,String],default:56}},Pt()),Pe()),nt()),ot()),Pl({name:"bottom-navigation"})),Ke({tag:"header"})),Ot({modelValue:!0,selectedClass:"v-btn--selected"})),Se()),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:r}=t;const{themeClasses:o}=Dl(),{borderClasses:i}=Dt(e),{backgroundColorClasses:l,backgroundColorStyles:n}=Fe(N(e,"bgColor")),{densityClasses:s}=De(e),{elevationClasses:d}=st(e),{roundedClasses:c}=dt(e),v=m(()=>Number(e.height)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0)),f=oe(e,"modelValue",e.modelValue),{layoutItemStyles:p}=El({id:e.name,order:m(()=>parseInt(e.order,10)),position:m(()=>"bottom"),layoutSize:m(()=>f.value?v.value:0),elementSize:v,active:f,absolute:N(e,"absolute")});return Rt(e,Al),Mt({VBtn:{color:N(e,"color"),density:N(e,"density"),stacked:m(()=>e.mode!=="horizontal"),variant:"text"}},{scoped:!0}),()=>a(e.tag,{class:["v-bottom-navigation",{"v-bottom-navigation--active":f.value,"v-bottom-navigation--grow":e.grow,"v-bottom-navigation--shift":e.mode==="shift"},o.value,l.value,i.value,s.value,d.value,c.value],style:[n.value,p.value,{height:ue(v.value),transform:`translateY(${ue(f.value?0:100,"%")})`}]},{default:()=>[r.default&&a("div",{class:"v-bottom-navigation__content"},[r.default()])]})}}),dn={async created(){await this.fetchData()},data(){return{loading:!0,panel:"OPERATOR",selectedOperator:"",showOperatorDialog:!1,showCharacterSelectorDialog:!1}},methods:{async fetchData(){this.loading=!0,await Promise.all([this.$store.dispatch(Fl),this.$store.dispatch(Bl),this.$store.dispatch(ql),this.$store.dispatch(Ul),this.$store.dispatch(Nl),this.$store.dispatch(jl),this.$store.dispatch(Gl)]),await this.$store.dispatch(Kl),this.loading=!1},selectOperator(e){this.selectedOperator=e,this.showOperatorDialog=!0},saveSelectedOperatorIds(e){this.$store.dispatch(Wl,e),this.showCharacterSelectorDialog=!1}},computed:ce(h({},at(["operatorIds"])),{characterDataById(){return this.$store.state.character.characterDataById},operators(){return this.operatorIds.map(e=>this.characterDataById[e]).sort((e,t)=>t.rarity-e.rarity||e.appellation.localeCompare(t.appellation))},selectedOperatorIds(){return this.$store.state.materialPlanner.selectedOperatorIds}}),watch:{TARGET(e){localStorage.setItem("MaterialPlanner",JSON.stringify({TARGET:e,current:this.current,currentItem:this.currentItem}))},current(e){localStorage.setItem("MaterialPlanner",JSON.stringify({TARGET:this.TARGET,current:e,currentItem:this.currentItem}))},currentItem(e){localStorage.setItem("MaterialPlanner",JSON.stringify({TARGET:this.TARGET,current:this.current,currentItem:e}))}},provide(){return{operators:m(()=>this.operators)}},components:{MaterialPlannerItems:li,MaterialPlannerOperators:on}},un=L("mdi-account"),cn=g("span",null,"Operators",-1),vn=L("mdi-package-variant"),pn=g("span",null,"Items",-1);function mn(e,t,r,o,i,l){const n=O("MaterialPlannerOperators"),s=O("MaterialPlannerItems");return _(),D(q,null,[i.loading?(_(),z(At,{key:0,indeterminate:""})):Be("",!0),i.loading?Be("",!0):(_(),D(q,{key:1},[U(a(n,null,null,512),[[J,i.panel==="OPERATOR"]]),U(a(s,{panel:i.panel},null,8,["panel"]),[[J,i.panel==="ITEM"]]),a(sn,{density:"compact",color:"info",modelValue:i.panel,"onUpdate:modelValue":t[0]||(t[0]=d=>i.panel=d),mandatory:""},{default:u(()=>[a(Y,{value:"OPERATOR"},{default:u(()=>[a(ne,{class:"mr-2"},{default:u(()=>[un]),_:1}),cn]),_:1}),a(Y,{value:"ITEM"},{default:u(()=>[a(ne,{class:"mr-2"},{default:u(()=>[vn]),_:1}),pn]),_:1})]),_:1},8,["modelValue"])],64))],64)}var bn=P(dn,[["render",mn]]);export{bn as default};
