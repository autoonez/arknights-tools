import{u as Q}from"./resizeObserver.456e8566.js";import{l as U,a6 as V,a7 as ee,n as k,y as P,a8 as te,a9 as oe,g as a,H as ne,Z as $,h as M,E as ae,aa as D,ab as se}from"./index.abfb314c.js";const R=Symbol.for("vuetify:layout"),X=Symbol.for("vuetify:layout-item"),N=1e3,ce=U({overlaps:{type:Array,default:()=>[]},fullHeight:Boolean},"layout"),ve=U({name:{type:String},order:{type:[Number,String],default:0},absolute:Boolean},"layout-item");function de(){const u=V(R);if(!u)throw new Error("Could not find injected Vuetify layout");return u}function ye(u){var d;const l=V(R);if(!l)throw new Error("Could not find injected Vuetify layout");const v=(d=u.id)!=null?d:`layout-item-${ee()}`,i=k("useLayoutItem");D(X,{id:v});const n=P(!1);te(()=>n.value=!0),oe(()=>n.value=!1);const{layoutItemStyles:r,layoutItemScrimStyles:c}=l.register(i,{...u,active:a(()=>n.value?!1:u.active.value),id:v});return ne(()=>l.unregister(v)),{layoutItemStyles:r,layoutRect:l.layoutRect,layoutItemScrimStyles:c}}const ue=(u,l,v,i)=>{let n={top:0,left:0,right:0,bottom:0};const r=[{id:"",layer:{...n}}];for(const c of u){const d=l.get(c),g=v.get(c),L=i.get(c);if(!d||!g||!L)continue;const h={...n,[d.value]:parseInt(n[d.value],10)+(L.value?parseInt(g.value,10):0)};r.push({id:c,layer:h}),n=h}return r};function fe(u){const l=V(R,null),v=a(()=>l?l.rootZIndex.value-100:N),i=P([]),n=$(new Map),r=$(new Map),c=$(new Map),d=$(new Map),g=$(new Map),{resizeRef:L,contentRect:h}=Q(),_=a(()=>{var t;const e=new Map,s=(t=u.overlaps)!=null?t:[];for(const f of s.filter(o=>o.includes(":"))){const[o,p]=f.split(":");if(!i.value.includes(o)||!i.value.includes(p))continue;const m=n.get(o),x=n.get(p),w=r.get(o),z=r.get(p);!m||!x||!w||!z||(e.set(p,{position:m.value,amount:parseInt(w.value,10)}),e.set(o,{position:x.value,amount:-parseInt(z.value,10)}))}return e}),b=a(()=>{const e=[...new Set([...c.values()].map(t=>t.value))].sort((t,f)=>t-f),s=[];for(const t of e){const f=i.value.filter(o=>{var p;return((p=c.get(o))==null?void 0:p.value)===t});s.push(...f)}return ue(s,n,r,d)}),H=a(()=>!Array.from(g.values()).some(e=>e.value)),q=a(()=>{const e=b.value[b.value.length-1].layer;return{"--v-layout-left":M(e.left),"--v-layout-right":M(e.right),"--v-layout-top":M(e.top),"--v-layout-bottom":M(e.bottom),...H.value?void 0:{transition:"none"}}}),I=a(()=>b.value.slice(1).map((e,s)=>{let{id:t}=e;const{layer:f}=b.value[s],o=r.get(t);return{id:t,...f,size:Number(o.value)}})),T=e=>I.value.find(s=>s.id===e),Z=k("createLayout"),j=P(!1);ae(()=>{j.value=!0}),D(R,{register:(e,s)=>{let{id:t,order:f,position:o,layoutSize:p,elementSize:m,active:x,disableTransitions:w,absolute:z}=s;c.set(t,f),n.set(t,o),r.set(t,p),d.set(t,x),w&&g.set(t,w);const B=se(X,Z==null?void 0:Z.vnode).indexOf(e);B>-1?i.value.splice(B,0,t):i.value.push(t);const E=a(()=>I.value.findIndex(S=>S.id===t)),O=a(()=>v.value+b.value.length*2-E.value*2),Y=a(()=>{const S=o.value==="left"||o.value==="right",A=o.value==="right",J=o.value==="bottom",K={[o.value]:0,zIndex:O.value,transform:`translate${S?"X":"Y"}(${(x.value?0:-110)*(A||J?-1:1)}%)`,position:z.value||v.value!==N?"absolute":"fixed",...H.value?void 0:{transition:"none"}};if(!j.value)return K;if(E.value<0)throw new Error(`Layout item "${t}" is missing`);const y=I.value[E.value];if(!y)throw new Error(`Could not find layout item "${t}`);const C=_.value.get(t);return C&&(y[C.position]+=C.amount),{...K,height:S?`calc(100% - ${y.top}px - ${y.bottom}px)`:m.value?`${m.value}px`:void 0,left:A?void 0:`${y.left}px`,right:A?`${y.right}px`:void 0,top:o.value!=="bottom"?`${y.top}px`:void 0,bottom:o.value!=="top"?`${y.bottom}px`:void 0,width:S?m.value?`${m.value}px`:void 0:`calc(100% - ${y.left}px - ${y.right}px)`}}),G=a(()=>({zIndex:O.value-1}));return{layoutItemStyles:Y,layoutItemScrimStyles:G,zIndex:O}},unregister:e=>{c.delete(e),n.delete(e),r.delete(e),d.delete(e),g.delete(e),i.value=i.value.filter(s=>s!==e)},mainStyles:q,getLayoutItem:T,items:I,layoutRect:h,rootZIndex:v});const F=a(()=>["v-layout",{"v-layout--full-height":u.fullHeight}]),W=a(()=>({zIndex:v.value,position:l?"relative":void 0,overflow:l?"hidden":void 0}));return{layoutClasses:F,layoutStyles:W,getLayoutItem:T,items:I,layoutRect:h,layoutRef:L}}export{de as a,ce as b,fe as c,ve as m,ye as u};
