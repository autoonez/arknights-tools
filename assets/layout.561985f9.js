import{u as Q}from"./resizeObserver.d901d395.js";import{p as Z,a3 as V,a4 as ee,g as k,j as P,a5 as te,a6 as oe,h as a,C as ne,W as $,x as M,A as ae,a7 as D,a8 as se}from"./index.af01303f.js";const R=Symbol.for("vuetify:layout"),W=Symbol.for("vuetify:layout-item"),U=1e3,ce=Z({overlaps:{type:Array,default:()=>[]},fullHeight:Boolean},"layout"),ve=Z({name:{type:String},order:{type:[Number,String],default:0},absolute:Boolean},"layout-item");function de(){const u=V(R);if(!u)throw new Error("Could not find injected Vuetify layout");return u}function fe(u){var d;const l=V(R);if(!l)throw new Error("Could not find injected Vuetify layout");const v=(d=u.id)!=null?d:`layout-item-${ee()}`,i=k("useLayoutItem");D(W,{id:v});const n=P(!1);te(()=>n.value=!0),oe(()=>n.value=!1);const{layoutItemStyles:r,layoutItemScrimStyles:c}=l.register(i,{...u,active:a(()=>n.value?!1:u.active.value),id:v});return ne(()=>l.unregister(v)),{layoutItemStyles:r,layoutRect:l.layoutRect,layoutItemScrimStyles:c}}const ue=(u,l,v,i)=>{let n={top:0,left:0,right:0,bottom:0};const r=[{id:"",layer:{...n}}];for(const c of u){const d=l.get(c),g=v.get(c),L=i.get(c);if(!d||!g||!L)continue;const h={...n,[d.value]:parseInt(n[d.value],10)+(L.value?parseInt(g.value,10):0)};r.push({id:c,layer:h}),n=h}return r};function ye(u){const l=V(R,null),v=a(()=>l?l.rootZIndex.value-100:U),i=P([]),n=$(new Map),r=$(new Map),c=$(new Map),d=$(new Map),g=$(new Map),{resizeRef:L,contentRect:h}=Q(),X=a(()=>{var t;const e=new Map,s=(t=u.overlaps)!=null?t:[];for(const y of s.filter(o=>o.includes(":"))){const[o,p]=y.split(":");if(!i.value.includes(o)||!i.value.includes(p))continue;const m=n.get(o),x=n.get(p),w=r.get(o),z=r.get(p);!m||!x||!w||!z||(e.set(p,{position:m.value,amount:parseInt(w.value,10)}),e.set(o,{position:x.value,amount:-parseInt(z.value,10)}))}return e}),I=a(()=>{const e=[...new Set([...c.values()].map(t=>t.value))].sort((t,y)=>t-y),s=[];for(const t of e){const y=i.value.filter(o=>{var p;return((p=c.get(o))==null?void 0:p.value)===t});s.push(...y)}return ue(s,n,r,d)}),j=a(()=>!Array.from(g.values()).some(e=>e.value)),_=a(()=>{const e=I.value[I.value.length-1].layer;return{"--v-layout-left":M(e.left),"--v-layout-right":M(e.right),"--v-layout-top":M(e.top),"--v-layout-bottom":M(e.bottom),...j.value?void 0:{transition:"none"}}}),b=a(()=>I.value.slice(1).map((e,s)=>{let{id:t}=e;const{layer:y}=I.value[s],o=r.get(t);return{id:t,...y,size:Number(o.value)}})),H=e=>b.value.find(s=>s.id===e),T=k("createLayout"),B=P(!1);ae(()=>{B.value=!0}),D(R,{register:(e,s)=>{let{id:t,order:y,position:o,layoutSize:p,elementSize:m,active:x,disableTransitions:w,absolute:z}=s;c.set(t,y),n.set(t,o),r.set(t,p),d.set(t,x),w&&g.set(t,w);const K=se(W,T==null?void 0:T.vnode).indexOf(e);K>-1?i.value.splice(K,0,t):i.value.push(t);const A=a(()=>b.value.findIndex(S=>S.id===t)),C=a(()=>v.value+I.value.length*2-A.value*2),Y=a(()=>{const S=o.value==="left"||o.value==="right",O=o.value==="right",J=o.value==="bottom",N={[o.value]:0,zIndex:C.value,transform:`translate${S?"X":"Y"}(${(x.value?0:-110)*(O||J?-1:1)}%)`,position:z.value||v.value!==U?"absolute":"fixed",...j.value?void 0:{transition:"none"}};if(!B.value)return N;if(A.value<0)throw new Error(`Layout item "${t}" is missing`);const f=b.value[A.value];if(!f)throw new Error(`Could not find layout item "${t}`);const E=X.value.get(t);return E&&(f[E.position]+=E.amount),{...N,height:S?`calc(100% - ${f.top}px - ${f.bottom}px)`:m.value?`${m.value}px`:void 0,left:O?void 0:`${f.left}px`,right:O?`${f.right}px`:void 0,top:o.value!=="bottom"?`${f.top}px`:void 0,bottom:o.value!=="top"?`${f.bottom}px`:void 0,width:S?m.value?`${m.value}px`:void 0:`calc(100% - ${f.left}px - ${f.right}px)`}}),G=a(()=>({zIndex:C.value-1}));return{layoutItemStyles:Y,layoutItemScrimStyles:G,zIndex:C}},unregister:e=>{c.delete(e),n.delete(e),r.delete(e),d.delete(e),g.delete(e),i.value=i.value.filter(s=>s!==e)},mainStyles:_,getLayoutItem:H,items:b,layoutRect:h,rootZIndex:v});const q=a(()=>["v-layout",{"v-layout--full-height":u.fullHeight}]),F=a(()=>({zIndex:v.value,position:l?"relative":void 0,overflow:l?"hidden":void 0}));return{layoutClasses:q,layoutStyles:F,getLayoutItem:H,items:b,layoutRect:h,layoutRef:L}}export{de as a,ce as b,ye as c,ve as m,fe as u};
