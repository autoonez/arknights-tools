var Gt=Object.defineProperty,Kt=Object.defineProperties;var Wt=Object.getOwnPropertyDescriptors;var Le=Object.getOwnPropertySymbols;var tt=Object.prototype.hasOwnProperty,at=Object.prototype.propertyIsEnumerable;var et=(e,t,i)=>t in e?Gt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,h=(e,t)=>{for(var i in t||(t={}))tt.call(t,i)&&et(e,i,t[i]);if(Le)for(var i of Le(t))at.call(t,i)&&et(e,i,t[i]);return e},oe=(e,t)=>Kt(e,Wt(t));var Ae=(e,t)=>{var i={};for(var r in e)tt.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(e!=null&&Le)for(var r of Le(e))t.indexOf(r)<0&&at.call(e,r)&&(i[r]=e[r]);return i};import{p as Z,a6 as Ht,Y as nt,B as Q,_ as P,j as me,o as f,c as y,w as s,Q as b,t as re,n as st,aM as Yt,aN as Xt,K as D,a as W,b as a,h as G,N as de,F,r as J,d as L,i as Be,aB as ot,aO as dt,I as p,aP as De,aK as qe,aH as ut,aj as $e,ah as xe,aQ as Ne,aR as je,aC as Me,G as X,aS as Qt,aT as Jt,aU as Zt,ak as ct,aV as vt,a0 as ge,a1 as ea,aA as Oe,a8 as ta,Z as ye,g as ie,v as pt,s as mt,aD as aa,aW as la,aX as lt,aY as ft,$ as _t,av as ve,D as ht,O as te,ad as Ge,aZ as ia,aI as be,a_ as ra,E as gt,A as Ce,L as Ie,a$ as ne,y as ze,z as Ke,b0 as na,b1 as sa,b2 as oa,b3 as da,b4 as ua,am as ca,S as We,b5 as we,b6 as ke,b7 as va,b8 as bt,b9 as pa,ba as xt,bb as He,bc as yt,x as Ye,bd as kt,be as It,bf as Ct,bg as it,bh as ma,bi as fa,bj as _a,bk as ha,bl as ga,bm as ba,bn as xa,bo as ya,bp as ka,bq as Ia,R as Ca}from"./index.86238e30.js";import{a as z,d as M,g as wt,h as St,e as se,c as ue,f as $t,n as wa,s as Sa,V as Pe,b as Ve,m as Vt,u as $a}from"./VProgressLinear.c1a7f7ee.js";const Va=Z({name:"VToolbarItems",props:h({},Ht({variant:"tonal"})),setup(e,t){let{slots:i}=t;return nt({VBtn:{color:Q(e,"color"),variant:Q(e,"variant")}}),()=>{var r;return(r=i.default)==null?void 0:r.call(i)}}});const La={props:["id","name","isSelected"],emits:["selectOperator"],computed:{imgSrc(){return`${me}/images/avatar/${this.id}.png`}},methods:{selectOperator(){this.$emit("selectOperator",this.id)}}},Ta={class:"operator-card-img-wrap"},Da=["src"],Ma={class:"operator-card-name"};function Oa(e,t,i,r,n,l){return f(),y(z,{"max-width":"64px",class:"rounded-0"},{default:s(()=>[b("div",Ta,[b("img",{src:l.imgSrc,class:"operator-card-img"},null,8,Da)]),b("p",Ma,re(i.name),1),b("div",{class:st(["overlay-custom",{"d-block":i.isSelected,"d-none":!i.isSelected}])},null,2)]),_:1})}var Lt=P(La,[["render",Oa],["__scopeId","data-v-1710b69b"]]);const za={emits:["selectOperator","openCharacterSelectorDialog"],inject:["operators"],computed:{selectedOperatorIds(){return this.$store.state.materialPlanner.selectedOperatorIds},characterDataById(){return this.$store.state.character.characterDataById}},components:{OperatorCard:Lt},methods:{selectOperator(e){this.$emit("selectOperator",e)},setTargetToCurrent(){this.$store.dispatch(Yt)},setTargetToMax(){this.$store.dispatch(Xt)}}},Pa=L("Target"),Ea=L("Set to current"),Ra=L("Set to max"),Aa=L("Select");function Ba(e,t,i,r,n,l){const o=D("OperatorCard");return f(),W(F,null,[a(se,null,{default:s(()=>[a(M,{cols:"12",sm:"6"},{default:s(()=>[a(z,{variant:"outlined"},{default:s(()=>[a(wt,null,{default:s(()=>[Pa]),_:1}),a(St,null,{default:s(()=>[a(G,{variant:"outlined",onClick:l.setTargetToCurrent},{default:s(()=>[Ea]),_:1},8,["onClick"]),a(G,{variant:"outlined",onClick:l.setTargetToMax},{default:s(()=>[Ra]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1}),a(z,{variant:"outlined",class:"mt-4"},{default:s(()=>[a(de,null,{default:s(()=>[a(G,{variant:"outlined",onClick:t[0]||(t[0]=d=>this.$emit("openCharacterSelectorDialog"))},{default:s(()=>[Aa]),_:1})]),_:1}),a(ue,{class:"operatorContainer"},{default:s(()=>[(f(!0),W(F,null,J(l.operators,(d,u)=>(f(),W(F,null,[l.selectedOperatorIds.includes(d.id)?(f(),y(o,{key:u,id:d.id,name:d.appellation,onClick:c=>l.selectOperator(d.id)},null,8,["id","name","onClick"])):Be("",!0)],64))),256))]),_:1})]),_:1})],64)}var Ua=P(za,[["render",Ba]]);const Fa=Z({name:"VMessages",props:h({active:Boolean,color:String,messages:{type:[Array,String],default:()=>[]}},ot({transition:{component:dt,leaveAbsolute:!0,group:!0}})),setup(e,t){let{slots:i}=t;const r=p(()=>De(e.messages)),{textColorClasses:n,textColorStyles:l}=qe(p(()=>e.color));return()=>a(ut,{transition:e.transition,tag:"div",class:["v-messages",n.value],style:l.value},{default:()=>[e.active&&r.value.map((o,d)=>a("div",{class:"v-messages__message",key:`${d}-${r.value}`},[i.message?i.message({message:o}):o]))]})}}),qa=Symbol.for("vuetify:form");function Na(){return $e(qa,null)}const ja=xe({disabled:Boolean,error:Boolean,errorMessages:{type:[Array,String],default:()=>[]},maxErrors:{type:[Number,String],default:1},name:String,readonly:Boolean,rules:{type:Array,default:()=>[]},modelValue:null,validationValue:null});function Ga(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ne(),i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:je();const r=Me(e,"modelValue"),n=p(()=>{var I;return(I=e.validationValue)!=null?I:r.value}),l=Na(),o=X([]),d=X(!0),u=p(()=>!!(De(r.value===""?null:r.value).length||De(n.value===""?null:n.value).length)),c=p(()=>!!(e.disabled||l!=null&&l.isDisabled.value)),_=p(()=>!!(e.readonly||l!=null&&l.isReadonly.value)),m=p(()=>e.errorMessages.length?De(e.errorMessages):o.value),g=p(()=>e.rules.length?e.error||m.value.length?!1:d.value?null:!0:!0),w=X(!1),E=p(()=>({[`${t}--error`]:g.value===!1,[`${t}--dirty`]:u.value,[`${t}--disabled`]:c.value,[`${t}--readonly`]:_.value})),S=p(()=>{var I;return(I=e.name)!=null?I:Qt(i)});Jt(()=>{l==null||l.register(S.value,k,R,q,g)}),Zt(()=>{l==null||l.unregister(S.value)}),ct(n,()=>{n.value!=null&&k()});function R(){q(),r.value=null}function q(){d.value=!0,o.value=[]}async function k(){const I=[];w.value=!0;for(const x of e.rules){if(I.length>=(e.maxErrors||1))break;const $=await(typeof x=="function"?x:()=>x)(n.value);if($!==!0){if(typeof $!="string"){console.warn(`${$} is not a valid value. Rule functions must return boolean true or a string.`);continue}I.push($)}}return o.value=I,w.value=!1,d.value=!1,o.value}return{errorMessages:m,isDirty:u,isDisabled:c,isReadonly:_,isPristine:d,isValid:g,isValidating:w,reset:R,resetValidation:q,validate:k,validationClasses:E}}const Xe=xe(h(h({id:String,appendIcon:ge,prependIcon:ge,hideDetails:[Boolean,String],messages:{type:[Array,String],default:()=>[]},direction:{type:String,default:"horizontal",validator:e=>["horizontal","vertical"].includes(e)}},ea()),ja())),Qe=Oe()({name:"VInput",props:h({},Xe()),emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:i,slots:r,emit:n}=t;const{densityClasses:l}=ta(e),o=je(),d=p(()=>e.id||`input-${o}`),{errorMessages:u,isDirty:c,isDisabled:_,isReadonly:m,isPristine:g,isValid:w,isValidating:E,reset:S,resetValidation:R,validate:q,validationClasses:k}=Ga(e,"v-input",d),I=p(()=>({id:d,isDirty:c,isDisabled:_,isReadonly:m,isPristine:g,isValid:w,isValidating:E,reset:S,resetValidation:R,validate:q}));return ye(()=>{var x,A,$,K,V;const B=!!(r.prepend||e.prependIcon),C=!!(r.append||e.appendIcon),O=!!((x=e.messages)!=null&&x.length||u.value.length),N=!e.hideDetails||e.hideDetails==="auto"&&O;return a("div",{class:["v-input",`v-input--${e.direction}`,l.value,k.value]},[B&&a("div",{class:"v-input__prepend"},[r==null||(A=r.prepend)==null?void 0:A.call(r,I.value),e.prependIcon&&a(ie,{onClick:i["onClick:prepend"],icon:e.prependIcon},null)]),r.default&&a("div",{class:"v-input__control"},[($=r.default)==null?void 0:$.call(r,I.value)]),C&&a("div",{class:"v-input__append"},[r==null||(K=r.append)==null?void 0:K.call(r,I.value),e.appendIcon&&a(ie,{onClick:i["onClick:append"],icon:e.appendIcon},null)]),N&&a("div",{class:"v-input__details"},[a(Fa,{active:O,messages:u.value.length>0?u.value:e.messages},{message:r.message}),(V=r.details)==null?void 0:V.call(r,I.value)])])}),{reset:S,resetValidation:R,validate:q}}});function Tt(e){return vt(e,Object.keys(Qe.props))}const Je=Symbol.for("vuetify:v-slider");function Ka(e,t,i){const r=i==="vertical",n=t.getBoundingClientRect(),l="touches"in e?e.touches[0]:e;return r?l.clientY-(n.top+n.height/2):l.clientX-(n.left+n.width/2)}function Wa(e,t){return"touches"in e&&e.touches.length?e.touches[0][t]:"changedTouches"in e&&e.changedTouches.length?e.changedTouches[0][t]:e[t]}const Ha=xe(h(h({disabled:Boolean,error:Boolean,readonly:Boolean,max:{type:[Number,String],default:100},min:{type:[Number,String],default:0},step:{type:[Number,String],default:0},thumbColor:String,thumbLabel:{type:[Boolean,String],default:void 0,validator:e=>typeof e=="boolean"||e==="always"},thumbSize:{type:[Number,String],default:20},showTicks:{type:[Boolean,String],default:!1,validator:e=>typeof e=="boolean"||e==="always"},ticks:{type:[Array,Object]},tickSize:{type:[Number,String],default:2},color:String,trackColor:String,trackFillColor:String,trackSize:{type:[Number,String],default:4},direction:{type:String,default:"horizontal",validator:e=>["vertical","horizontal"].includes(e)},reverse:Boolean},pt()),mt({elevation:2})),"slider"),Ya=e=>{let{props:t,handleSliderMouseUp:i,handleMouseMove:r,getActiveThumb:n}=e;const{isRtl:l}=aa(),o=p(()=>l.value!==t.reverse),d=p(()=>{let v=l.value?"rtl":"ltr";return t.reverse&&(v=v==="rtl"?"ltr":"rtl"),v}),u=p(()=>parseFloat(t.min)),c=p(()=>parseFloat(t.max)),_=p(()=>t.step>0?parseFloat(t.step):0),m=p(()=>{const v=_.value.toString().trim();return v.includes(".")?v.length-v.indexOf(".")-1:0}),g=p(()=>parseInt(t.thumbSize,10)),w=p(()=>parseInt(t.tickSize,10)),E=p(()=>parseInt(t.trackSize,10)),S=p(()=>(c.value-u.value)/_.value),R=Q(t,"disabled"),q=p(()=>t.direction==="vertical"),k=p(()=>{var v;return t.error||t.disabled?void 0:(v=t.thumbColor)!=null?v:t.color}),I=p(()=>{var v;return t.error||t.disabled?void 0:(v=t.trackColor)!=null?v:t.color}),x=p(()=>{var v;return t.error||t.disabled?void 0:(v=t.trackFillColor)!=null?v:t.color}),A=X(!1),$=X(0),K=X(),V=X();function B(v){if(_.value<=0)return v;const ee=lt(v,u.value,c.value),he=u.value%_.value,Ee=Math.round((ee-he)/_.value)*_.value+he;return parseFloat(Math.min(Ee,c.value).toFixed(m.value))}function C(v){var ee;const he=t.direction==="vertical",Ee=he?"top":"left",Ut=he?"height":"width",Ft=he?"clientY":"clientX",{[Ee]:qt,[Ut]:Nt}=(ee=K.value)==null?void 0:ee.$el.getBoundingClientRect(),jt=Wa(v,Ft);let Re=Math.min(Math.max((jt-qt-$.value)/Nt,0),1)||0;return(he||o.value)&&(Re=1-Re),B(u.value+Re*(c.value-u.value))}let O=!1;const N=v=>{O||($.value=0,i(C(v))),A.value=!1,O=!1,$.value=0},H=v=>{V.value=n(v),V.value&&(V.value.focus(),A.value=!0,V.value.contains(v.target)?(O=!0,$.value=Ka(v,V.value,t.direction)):($.value=0,r(C(v))))},Y={passive:!0,capture:!0};function j(v){O=!0,r(C(v))}function T(v){v.stopPropagation(),v.preventDefault(),N(v),window.removeEventListener("mousemove",j,Y),window.removeEventListener("mouseup",T)}function U(v){v.stopPropagation(),v.preventDefault(),N(v),window.removeEventListener("touchmove",j,Y),window.removeEventListener("touchend",U)}function ae(v){H(v),window.addEventListener("touchmove",j,Y),window.addEventListener("touchend",U,{passive:!1})}function ce(v){v.preventDefault(),H(v),window.addEventListener("mousemove",j,Y),window.addEventListener("mouseup",T,{passive:!1})}const le=v=>{const ee=(v-u.value)/(c.value-u.value)*100;return lt(isNaN(ee)?0:ee,0,100)},fe=p(()=>t.ticks?Array.isArray(t.ticks)?t.ticks.map(v=>({value:v,position:le(v),label:v.toString()})):Object.keys(t.ticks).map(v=>({value:parseInt(v,10),position:le(parseInt(v,10)),label:t.ticks[v]})):S.value!==1/0?la(S.value+1).map(v=>{const ee=u.value+v*_.value;return{value:ee,position:le(ee)}}):[]),_e=p(()=>fe.value.some(v=>{let{label:ee}=v;return!!ee})),Ze={activeThumbRef:V,color:Q(t,"color"),decimals:m,disabled:R,direction:Q(t,"direction"),elevation:Q(t,"elevation"),hasLabels:_e,horizontalDirection:d,isReversed:o,min:u,max:c,mousePressed:A,numTicks:S,onSliderMousedown:ce,onSliderTouchstart:ae,parsedTicks:fe,parseMouseMove:C,position:le,readonly:Q(t,"readonly"),rounded:Q(t,"rounded"),roundValue:B,showTicks:Q(t,"showTicks"),startOffset:$,step:_,thumbSize:g,thumbColor:k,thumbLabel:Q(t,"thumbLabel"),ticks:Q(t,"ticks"),tickSize:w,trackColor:I,trackContainerRef:K,trackFillColor:x,trackSize:E,vertical:q};return ft(Je,Ze),Ze},Xa=Z({name:"VSliderThumb",directives:{Ripple:_t},props:{focused:Boolean,max:{type:Number,required:!0},min:{type:Number,required:!0},modelValue:{type:Number,required:!0},position:{type:Number,required:!0}},emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:i,emit:r}=t;const n=$e(Je);if(!n)throw new Error("[Vuetify] v-slider-thumb must be used inside v-slider or v-range-slider");const{thumbColor:l,step:o,vertical:d,disabled:u,thumbSize:c,thumbLabel:_,direction:m,readonly:g,elevation:w,isReversed:E,horizontalDirection:S,mousePressed:R,decimals:q}=n,{textColorClasses:k,textColorStyles:I}=qe(l),{pageup:x,pagedown:A,end:$,home:K,left:V,right:B,down:C,up:O}=ra,N=[x,A,$,K,V,B,C,O],H=p(()=>o.value?[1,2,3]:[1,5,10]);function Y(T,U){if(!N.includes(T.key))return;T.preventDefault();const ae=o.value||.1,ce=(e.max-e.min)/ae;if([V,B,C,O].includes(T.key)){const fe=(E.value?[V,O]:[B,O]).includes(T.key)?1:-1,_e=T.shiftKey?2:T.ctrlKey?1:0;U=U+fe*ae*H.value[_e]}else if(T.key===K)U=e.min;else if(T.key===$)U=e.max;else{const le=T.key===A?1:-1;U=U-le*ae*(ce>100?ce/10:10)}return Math.max(e.min,Math.min(e.max,U))}function j(T){const U=Y(T,e.modelValue);U!=null&&r("update:modelValue",U)}return()=>{var T,U;const ae=ve(d.value?100-e.position:e.position,"%"),ce=d.value?"block":"inline",{elevationClasses:le}=ht(p(()=>u.value?void 0:w.value));return a("div",{class:["v-slider-thumb",{"v-slider-thumb--focused":e.focused,"v-slider-thumb--pressed":e.focused&&R.value}],style:{[`inset-${ce}-start`]:`calc(${ae} - var(--v-slider-thumb-size) / 2)`,"--v-slider-thumb-size":ve(c.value),direction:d.value?void 0:S.value},role:"slider",tabindex:u.value?-1:0,"aria-valuemin":e.min,"aria-valuemax":e.max,"aria-valuenow":e.modelValue,"aria-readonly":g.value,"aria-orientation":m.value,onKeydown:g.value?void 0:j},[a("div",{class:["v-slider-thumb__surface",k.value,le.value],style:h({},I.value)},null),te(a("div",{class:["v-slider-thumb__ripple",k.value],style:I.value},null),[[Ge("ripple"),!0,null,{circle:!0,center:!0}]]),a(ia,{origin:"bottom center"},{default:()=>[te(a("div",{class:"v-slider-thumb__label-container"},[a("div",{class:["v-slider-thumb__label"]},[a("div",null,[(T=(U=i["thumb-label"])==null?void 0:U.call(i,{modelValue:e.modelValue}))!=null?T:e.modelValue.toFixed(o.value?q.value:1)])])]),[[be,_.value&&e.focused||_.value==="always"]])]})])}}});const Qa=Z({name:"VSliderTrack",props:{start:{type:Number,required:!0},stop:{type:Number,required:!0}},emits:{},setup(e,t){let{slots:i}=t;const r=$e(Je);if(!r)throw new Error("[Vuetify] v-slider-track must be inside v-slider or v-range-slider");const{trackColor:n,trackFillColor:l,vertical:o,tickSize:d,showTicks:u,trackSize:c,color:_,rounded:m,parsedTicks:g,horizontalDirection:w}=r,{roundedClasses:E}=gt(m),{backgroundColorClasses:S,backgroundColorStyles:R}=Ce(l),{backgroundColorClasses:q,backgroundColorStyles:k}=Ce(n),I=p(()=>`inset-${o.value?"block-end":"inline-start"}`),x=p(()=>o.value?"height":"width"),A=p(()=>({[I.value]:"0%",[x.value]:"100%"})),$=p(()=>e.stop-e.start),K=p(()=>({[I.value]:ve(e.start,"%"),[x.value]:ve($.value,"%")})),V=p(()=>(o.value?g.value.slice().reverse():g.value).map((C,O)=>{var N,H;const Y=o.value?"bottom":"margin-inline-start",j=C.position>0&&C.position<100?ve(C.position,"%"):void 0;return a("div",{key:C.value,class:["v-slider-track__tick",{"v-slider-track__tick--filled":C.position>=e.start&&C.position<=e.stop}],style:{[Y]:j}},[(C.label||i["tick-label"])&&a("div",{class:"v-slider-track__tick-label"},[(N=(H=i["tick-label"])==null?void 0:H.call(i,{tick:C,index:O}))!=null?N:C.label])])}));return()=>a("div",{class:["v-slider-track",E.value],style:{"--v-slider-track-size":ve(c.value),"--v-slider-tick-size":ve(d.value),direction:o.value?void 0:w.value}},[a("div",{class:["v-slider-track__background",q.value,{"v-slider-track__background--opacity":!!_.value||!l.value}],style:h(h({},A.value),k.value)},null),a("div",{class:["v-slider-track__fill",S.value],style:h(h({},K.value),R.value)},null),u.value&&a("div",{class:["v-slider-track__ticks",{"v-slider-track__ticks--always-show":u.value==="always"}]},[V.value])])}}),Dt=xe({focused:Boolean},"focus");function Mt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ne();const i=Me(e,"focused"),r=p(()=>({[`${t}--focused`]:i.value}));function n(){i.value=!0}function l(){i.value=!1}return{focusClasses:r,isFocused:i,focus:n,blur:l}}const pe=Z({name:"VSlider",props:oe(h(h(h({},Dt()),Ha()),Xe()),{modelValue:{type:[Number,String],default:0}}),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:i,slots:r}=t;const n=X(),{min:l,max:o,mousePressed:d,roundValue:u,onSliderMousedown:c,onSliderTouchstart:_,trackContainerRef:m,position:g,hasLabels:w,readonly:E}=Ya({props:e,handleSliderMouseUp:x=>S.value=u(x),handleMouseMove:x=>S.value=u(x),getActiveThumb:()=>{var x;return(x=n.value)==null?void 0:x.$el}}),S=Me(e,"modelValue",void 0,x=>{const A=typeof x=="string"?parseFloat(x):x==null?l.value:x;return u(A)}),{isFocused:R,focus:q,blur:k}=Mt(e),I=p(()=>g(S.value));return()=>{const[x,A]=Tt(e);return a(Qe,Ie({class:["v-slider",{"v-slider--has-labels":!!r["tick-label"]||w.value,"v-slider--focused":R.value,"v-slider--pressed":d.value,"v-slider--disabled":e.disabled}]},x,{focused:R.value}),oe(h({},r),{default:$=>{let{id:K}=$;return a("div",{class:"v-slider__container",onMousedown:E.value?void 0:c,onTouchstartPassive:E.value?void 0:_},[a("input",{id:K.value,name:e.name||K.value,disabled:e.disabled,readonly:e.readonly,tabindex:"-1",value:S.value},null),a(Qa,{ref:m,start:0,stop:I.value},{"tick-label":r["tick-label"]}),a(Xa,{ref:n,focused:R.value,min:l.value,max:o.value,modelValue:S.value,"onUpdate:modelValue":V=>S.value=V,position:I.value,elevation:e.elevation,onFocus:q,onBlur:k},{"thumb-label":r["thumb-label"]})])}}))}}}),Ja={name:"OperatorDialogPhase",props:["operatorId"],data(){return{}},computed:{itemUse(){return this.$store.state.itemUseByCharacterId[this.operatorId]},maxPhase(){return Object.keys(this.itemUse.phases)[Object.keys(this.itemUse.phases).length-1]},phaseLabels(){return[...Array(parseInt(this.maxPhase)+1).keys()].reduce((e,t)=>(e[t]=`Elite ${t}`,e),{})},currentPhase:{get(){return this.$store.state.materialPlanner.currentOperator[this.operatorId].phase},set(e){this.$store.dispatch(ne,{operatorId:this.operatorId,type:"CURRENT",phase:e})}},targetPhase:{get(){return this.$store.state.materialPlanner.targetOperator[this.operatorId].phase},set(e){this.$store.dispatch(ne,{operatorId:this.operatorId,type:"TARGET",phase:e})}}}},Za=L("Promotion"),el=b("p",{class:"d-flex d-sm-none"},"Current",-1),tl=b("p",{class:"d-flex d-sm-none"},"Target",-1);function al(e,t,i,r,n,l){return f(),y(se,{class:"mt-0 mt-sm-4"},{default:s(()=>[a(M,{cols:"12",sm:"2"},{default:s(()=>[Za]),_:1}),a(M,{cols:"12",sm:"5"},{default:s(()=>[el,a(pe,{modelValue:l.currentPhase,"onUpdate:modelValue":t[0]||(t[0]=o=>l.currentPhase=o),"hide-details":"",ticks:l.phaseLabels,max:l.maxPhase,step:"1","show-ticks":"always"},null,8,["modelValue","ticks","max"])]),_:1}),a(M,{cols:"12",sm:"5"},{default:s(()=>[tl,a(pe,{modelValue:l.targetPhase,"onUpdate:modelValue":t[1]||(t[1]=o=>l.targetPhase=o),"hide-details":"",ticks:l.phaseLabels,max:l.maxPhase,step:"1","show-ticks":"always"},null,8,["modelValue","ticks","max"])]),_:1})]),_:1})}var ll=P(Ja,[["render",al]]);const il=Z({name:"VLabel",props:h({text:String},ze()),setup(e,t){let{slots:i}=t;return()=>{var r;return a("label",{class:"v-label"},[e.text,(r=i.default)==null?void 0:r.call(i)])}}}),Te=Z({name:"VFieldLabel",props:{floating:Boolean},setup(e,t){let{slots:i}=t;return()=>a(il,{class:["v-field-label",{"v-field-label--floating":e.floating}],"aria-hidden":e.floating||void 0},i)}}),rl=xe({loading:Boolean},"loader");function nl(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ne();return{loaderClasses:p(()=>({[`${t}--loading`]:e.loading}))}}function sl(e,t){var i;let{slots:r}=t;return a("div",{class:`${e.name}__loader`},[((i=r.default)==null?void 0:i.call(r,{color:e.color,isActive:e.active}))||a($t,{active:e.active,color:e.color,height:"2",indeterminate:!0},null)])}const ol=["underlined","outlined","filled","solo","plain"],Ot=xe(h(h({appendInnerIcon:ge,bgColor:String,clearable:Boolean,clearIcon:{type:ge,default:"$clear"},active:Boolean,color:String,dirty:Boolean,disabled:Boolean,error:Boolean,label:String,persistentClear:Boolean,prependInnerIcon:ge,reverse:Boolean,singleLine:Boolean,variant:{type:String,default:"filled",validator:e=>ol.includes(e)}},ze()),rl()),"v-field"),zt=Oe()({name:"VField",inheritAttrs:!1,props:h(h({id:String},Dt()),Ot()),emits:{"click:clear":e=>!0,"click:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:i,emit:r,slots:n}=t;const{themeClasses:l}=Ke(e),{loaderClasses:o}=nl(e),{focusClasses:d,isFocused:u,focus:c,blur:_}=Mt(e),m=p(()=>e.dirty||e.active),g=p(()=>!e.singleLine&&!!(e.label||n.label)),w=je(),E=p(()=>e.id||`input-${w}`),S=X(),R=X(),q=X(),{backgroundColorClasses:k,backgroundColorStyles:I}=Ce(Q(e,"bgColor")),{textColorClasses:x,textColorStyles:A}=qe(p(()=>m.value&&u.value&&!e.error&&!e.disabled?e.color:void 0));ct(m,V=>{if(g.value){const B=S.value.$el,C=R.value.$el,O=wa(B),N=C.getBoundingClientRect(),H=N.x-O.x,Y=N.y-O.y-(O.height/2-N.height/2),j=N.width/.75,T=Math.abs(j-O.width)>1?{maxWidth:ve(j)}:void 0,U=parseFloat(getComputedStyle(B).transitionDuration)*1e3,ae=parseFloat(getComputedStyle(C).getPropertyValue("--v-field-label-scale"));B.style.visibility="visible",C.style.visibility="hidden",B.animate([{transform:"translate(0)"},h({transform:`translate(${H}px, ${Y}px) scale(${ae})`},T)],{duration:U,easing:Sa,direction:V?"normal":"reverse"}).finished.then(()=>{B.style.removeProperty("visibility"),C.style.removeProperty("visibility")})}},{flush:"post"});const $=p(()=>({isActive:m,isFocused:u,controlRef:q,blur:_,focus:c}));function K(V){V.target!==document.activeElement&&V.preventDefault(),r("click:control",V)}return ye(()=>{var V,B,C;const O=e.variant==="outlined",N=n.prependInner||e.prependInnerIcon,H=!!(e.clearable||n.clear),Y=!!(n.appendInner||e.appendInnerIcon||H),j=n.label?n.label({label:e.label,props:{for:E.value}}):e.label;return a("div",Ie({class:["v-field",{"v-field--active":m.value,"v-field--appended":Y,"v-field--disabled":e.disabled,"v-field--dirty":e.dirty,"v-field--error":e.error,"v-field--has-background":!!e.bgColor,"v-field--persistent-clear":e.persistentClear,"v-field--prepended":N,"v-field--reverse":e.reverse,"v-field--single-line":e.singleLine,"v-field--has-label":!!j,[`v-field--variant-${e.variant}`]:!0},l.value,k.value,d.value,o.value],style:[I.value,A.value],onClick:K},i),[a("div",{class:"v-field__overlay"},null),a(sl,{name:"v-field",active:e.loading,color:e.error?"error":e.color},{default:n.loader}),N&&a("div",{class:"v-field__prepend-inner"},[e.prependInnerIcon&&a(ie,{onClick:i["onClick:prependInner"],icon:e.prependInnerIcon},null),n==null||(V=n.prependInner)==null?void 0:V.call(n,$.value)]),a("div",{class:"v-field__field","data-no-activator":""},[["solo","filled"].includes(e.variant)&&g.value&&a(Te,{ref:R,class:[x.value],floating:!0},{default:()=>[j]}),a(Te,{ref:S,for:E.value},{default:()=>[j]}),(B=n.default)==null?void 0:B.call(n,oe(h({},$.value),{props:{id:E.value,class:"v-field__input"},focus:c,blur:_}))]),H&&a(na,null,{default:()=>[te(a("div",{class:"v-field__clearable"},[n.clear?n.clear():a(ie,{onClick:T=>r("click:clear",T),icon:e.clearIcon},null)]),[[be,e.dirty]])]}),Y&&a("div",{class:"v-field__append-inner"},[n==null||(C=n.appendInner)==null?void 0:C.call(n,$.value),e.appendInnerIcon&&a(ie,{onClick:i["onClick:appendInner"],icon:e.appendInnerIcon},null)]),a("div",{class:["v-field__outline",x.value]},[O&&a(F,null,[a("div",{class:"v-field__outline__start"},null),g.value&&a("div",{class:"v-field__outline__notch"},[a(Te,{ref:R,floating:!0},{default:()=>[j]})]),a("div",{class:"v-field__outline__end"},null)]),["plain","underlined"].includes(e.variant)&&g.value&&a(Te,{ref:R,floating:!0},{default:()=>[j]})])])}),{controlRef:q}}});function dl(e){return vt(e,Object.keys(zt.props))}const ul=Z({name:"VCounter",functional:!0,props:h({active:Boolean,max:[Number,String],value:{type:[Number,String],default:0}},ot({transition:{component:dt}})),setup(e,t){let{slots:i}=t;const r=p(()=>e.max?`${e.value} / ${e.max}`:String(e.value));return()=>a(ut,{transition:e.transition},{default:()=>[te(a("div",{class:"v-counter"},[i.default?i.default({counter:r.value,max:e.max,value:e.value}):r.value]),[[be,e.active]])]})}}),cl=["color","file","time","date","datetime-local","week","month"],Ue=Oe()({name:"VTextField",directives:{Intersect:sa},inheritAttrs:!1,props:h(h({autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,hint:String,persistentHint:Boolean,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,suffix:String,type:{type:String,default:"text"}},Xe()),Ot()),emits:{"click:clear":e=>!0,"click:control":e=>!0,"click:input":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:i,emit:r,slots:n}=t;const l=Me(e,"modelValue"),o=p(()=>{var k;return typeof e.counterValue=="function"?e.counterValue(l.value):((k=l.value)!=null?k:"").toString().length}),d=p(()=>{if(i.maxlength)return i.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter});function u(k,I){var x,A;!e.autofocus||!k||(x=I[0].target)==null||(A=x.focus)==null||A.call(x)}const c=X(),_=X(),m=X(!1),g=X(),w=p(()=>cl.includes(e.type)||e.persistentPlaceholder||m.value),E=p(()=>e.messages.length?e.messages:m.value||e.persistentHint?e.hint:"");function S(){if(g.value!==document.activeElement){var k;(k=g.value)==null||k.focus()}m.value||(m.value=!0)}function R(k){S(),r("click:control",k)}function q(k){k.stopPropagation(),S(),ca(()=>{l.value="",r("click:clear",k)})}return ye(()=>{const k=!!(n.counter||e.counter||e.counterValue),[I,x]=oa(i),[V]=Tt(e),B=V,{modelValue:A}=B,$=Ae(B,["modelValue"]),[K]=dl(e);return a(Qe,Ie({ref:c,modelValue:l.value,"onUpdate:modelValue":C=>l.value=C,class:["v-text-field",{"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-text-field--flush-details":["plain","underlined"].includes(e.variant)}],"onClick:prepend":i["onClick:prepend"],"onClick:append":i["onClick:append"]},I,$,{messages:E.value}),oe(h({},n),{default:C=>{let{id:O,isDisabled:N,isDirty:H,isReadonly:Y,isValid:j}=C;return a(zt,Ie({ref:_,onMousedown:T=>{T.target!==g.value&&T.preventDefault()},"onClick:control":R,"onClick:clear":q,"onClick:prependInner":i["onClick:prependInner"],"onClick:appendInner":i["onClick:appendInner"],role:"textbox"},K,{id:O.value,active:w.value||H.value,dirty:H.value||e.dirty,focused:m.value,error:j.value===!1}),oe(h({},n),{default:T=>{var U;let{props:le}=T,fe=le,{class:ae}=fe,ce=Ae(fe,["class"]);return a(F,null,[e.prefix&&a("span",{class:"v-text-field__prefix"},[e.prefix]),a("div",{class:ae,onClick:_e=>r("click:input",_e),"data-no-activator":""},[(U=n.default)==null?void 0:U.call(n),te(a("input",Ie({ref:g,"onUpdate:modelValue":_e=>l.value=_e,autofocus:e.autofocus,readonly:Y.value,disabled:N.value,name:e.name,placeholder:e.placeholder,size:1,type:e.type,onFocus:S,onBlur:()=>m.value=!1},ce,x),null),[[da,l.value],[Ge("intersect"),{handler:u},null,{once:!0}]])]),e.suffix&&a("span",{class:"v-text-field__suffix"},[e.suffix])])}}))},details:k?()=>a(F,null,[a("span",null,null),a(ul,{active:e.persistentCounter||m.value,value:o.value,max:d.value},n.counter)]):void 0}))}),ua({},c,_,g)}}),vl={name:"OperatorDialogLevel",props:["operatorId"],data(){return{}},computed:{operator(){return this.$store.state.character.characterDataById[this.operatorId]},maxLevel(){return this.$store.state.gameData.maxLevel},maxCurrentLevel(){let e=this.$store.state.materialPlanner.currentOperator[this.operatorId].phase;return this.maxLevel[this.operator.rarity][e]},maxTargetLevel(){let e=this.$store.state.materialPlanner.targetOperator[this.operatorId].phase;return this.maxLevel[this.operator.rarity][e]},currentLevel:{get(){return this.$store.state.materialPlanner.currentOperator[this.operatorId].level},set(e){this.$store.dispatch(ne,{operatorId:this.operatorId,type:"CURRENT",level:e})}},targetLevel:{get(){return this.$store.state.materialPlanner.targetOperator[this.operatorId].level},set(e){this.$store.dispatch(ne,{operatorId:this.operatorId,type:"TARGET",level:e})}}}},pl=L("Level");function ml(e,t,i,r,n,l){return f(),y(se,{class:"mt-0 mt-sm-4"},{default:s(()=>[a(M,{cols:"12",sm:"2"},{default:s(()=>[pl]),_:1}),a(M,{cols:"12",sm:"5"},{default:s(()=>[a(Ue,{label:"Current",type:"number",modelValue:l.currentLevel,"onUpdate:modelValue":t[0]||(t[0]=o=>l.currentLevel=o),max:l.maxCurrentLevel,min:1,"hide-details":""},null,8,["modelValue","max"])]),_:1}),a(M,{cols:"12",sm:"5"},{default:s(()=>[a(Ue,{label:"Target",type:"number",modelValue:l.targetLevel,"onUpdate:modelValue":t[1]||(t[1]=o=>l.targetLevel=o),max:l.maxTargetLevel,min:1,"hide-details":""},null,8,["modelValue","max"])]),_:1})]),_:1})}var fl=P(vl,[["render",ml]]);const _l={name:"OperatorDialogSkillLevel",props:["operatorId"],data(){return{}},computed:{itemUse(){return this.$store.state.itemUseByCharacterId[this.operatorId]},maxSkilllevel(){return Object.keys(this.itemUse.allSkillLvlup)[Object.keys(Object.keys(this.itemUse.allSkillLvlup)).length-1]},skillLevelLabels(){return[...Array(parseInt(this.maxSkilllevel)).keys()].reduce((e,t)=>(e[t+1]=parseInt(t)+1,e),{})},currentSkillLevel:{get(){return this.$store.state.materialPlanner.currentOperator[this.operatorId].skillLevel},set(e){this.$store.dispatch(ne,{operatorId:this.operatorId,type:"CURRENT",skillLevel:e})}},targetSkillLevel:{get(){return this.$store.state.materialPlanner.targetOperator[this.operatorId].skillLevel},set(e){this.$store.dispatch(ne,{operatorId:this.operatorId,type:"TARGET",skillLevel:e})}}}},hl=L("Skill Level"),gl=b("p",{class:"d-flex d-sm-none"},"Current",-1),bl=b("p",{class:"d-flex d-sm-none"},"Target",-1);function xl(e,t,i,r,n,l){return f(),y(se,{class:"mt-4"},{default:s(()=>[a(M,{cols:"12",sm:"2"},{default:s(()=>[hl]),_:1}),a(M,{cols:"12",sm:"5"},{default:s(()=>[gl,a(pe,{modelValue:l.currentSkillLevel,"onUpdate:modelValue":t[0]||(t[0]=o=>l.currentSkillLevel=o),"hide-details":"",ticks:l.skillLevelLabels,min:1,max:l.maxSkilllevel,step:"1","show-ticks":"always"},null,8,["modelValue","ticks","max"])]),_:1}),a(M,{cols:"12",sm:"5"},{default:s(()=>[bl,a(pe,{modelValue:l.targetSkillLevel,"onUpdate:modelValue":t[1]||(t[1]=o=>l.targetSkillLevel=o),"hide-details":"",ticks:l.skillLevelLabels,min:1,max:l.maxSkilllevel,step:"1","show-ticks":"always"},null,8,["modelValue","ticks","max"])]),_:1})]),_:1})}var yl=P(_l,[["render",xl]]);const kl={props:["operatorId","skill"],data(){return{}},computed:{imgSrc(){return`${me}/images/skills/skill_icon_${this.skill.skillId}.png`},maxMastery(){return Object.keys(this.skill.levelUpCostCond)[Object.keys(this.skill.levelUpCostCond).length-1]||0},masteryLabels(){return[...Array(parseInt(this.maxMastery)+1).keys()].reduce((e,t)=>(e[t]=`${t}`,e),{})},currentMastery:{get(){return this.$store.state.materialPlanner.currentOperator[this.operatorId].skillMastery[this.skill.skillId]},set(e){this.$store.dispatch(ne,{operatorId:this.operatorId,type:"CURRENT",skillMastery:{id:this.skill.skillId,value:e}})}},targetMastery:{get(){return this.$store.state.materialPlanner.targetOperator[this.operatorId].skillMastery[this.skill.skillId]},set(e){this.$store.dispatch(ne,{operatorId:this.operatorId,type:"TARGET",skillMastery:{id:this.skill.skillId,value:e}})}}}},Il=b("p",{class:"d-flex d-sm-none"},"Current Mastery Rank",-1),Cl=b("p",{class:"d-flex d-sm-none"},"Target Mastery Rank",-1);function wl(e,t,i,r,n,l){return f(),y(se,{class:"mt-4 align-center"},{default:s(()=>[a(M,{cols:"12",sm:"2"},{default:s(()=>[a(We,{src:l.imgSrc,width:"64px",class:"ma-auto"},null,8,["src"])]),_:1}),a(M,{cols:"12",sm:"5"},{default:s(()=>[Il,a(pe,{modelValue:l.currentMastery,"onUpdate:modelValue":t[0]||(t[0]=o=>l.currentMastery=o),"hide-details":"",ticks:l.masteryLabels,min:0,max:l.maxMastery,step:"1","show-ticks":"always"},null,8,["modelValue","ticks","max"])]),_:1}),a(M,{cols:"12",sm:"5"},{default:s(()=>[Cl,a(pe,{modelValue:l.targetMastery,"onUpdate:modelValue":t[1]||(t[1]=o=>l.targetMastery=o),"hide-details":"",ticks:l.masteryLabels,min:0,max:l.maxMastery,step:"1","show-ticks":"always"},null,8,["modelValue","ticks","max"])]),_:1})]),_:1})}var Sl=P(kl,[["render",wl]]);const $l={name:"OperatorDialogSkillMastery",props:["operatorId"],data(){return{}},computed:{itemUse(){return this.$store.state.itemUseByCharacterId[this.operatorId]}},components:{OperatorDialogSkillMasterySlider:Sl}};function Vl(e,t,i,r,n,l){const o=D("OperatorDialogSkillMasterySlider");return f(!0),W(F,null,J(Object.values(l.itemUse.skills),(d,u)=>(f(),y(o,{key:u,skill:d,operatorId:i.operatorId},null,8,["skill","operatorId"]))),128)}var Ll=P($l,[["render",Vl]]);const Tl={name:"OperatorDialogEquipmentSlider",props:["operatorId","equipmentId","equipmentLevels"],data(){return{}},computed:{equipment(){return this.$store.state.equipmentDataById[this.equipmentId]},imgSrc(){return`${me}/images/equipments/${this.equipment.uniEquipIcon==="original"?"default":this.equipment.uniEquipIcon}.png`},maxLevel(){return Object.keys(this.equipmentLevels)[Object.keys(this.equipmentLevels).length-1]||0},levelLabels(){return[...Array(parseInt(this.maxLevel)+1).keys()].reduce((e,t)=>(e[t]=`${t}`,e),{})},currentLevel:{get(){return this.$store.state.materialPlanner.currentOperator[this.operatorId].modules[this.equipmentId]},set(e){this.$store.dispatch(ne,{operatorId:this.operatorId,type:"CURRENT",modules:{id:this.equipmentId,value:e}})}},targetLevel:{get(){return this.$store.state.materialPlanner.targetOperator[this.operatorId].modules[this.equipmentId]},set(e){this.$store.dispatch(ne,{operatorId:this.operatorId,type:"TARGET",modules:{id:this.equipmentId,value:e}})}}}},Dl=b("p",{class:"d-flex d-sm-none"},"Current Module Level",-1),Ml=b("p",{class:"d-flex d-sm-none"},"Target Module Level",-1);function Ol(e,t,i,r,n,l){return f(),y(se,{class:"mt-4 align-center"},{default:s(()=>[a(M,{cols:"12",sm:"2"},{default:s(()=>[a(We,{src:l.imgSrc,width:"100%",class:"ma-auto"},null,8,["src"])]),_:1}),a(M,{cols:"12",sm:"5"},{default:s(()=>[Dl,a(pe,{modelValue:l.currentLevel,"onUpdate:modelValue":t[0]||(t[0]=o=>l.currentLevel=o),ticks:l.levelLabels,"hide-details":"",min:0,max:l.maxLevel,step:"1","show-ticks":"always"},null,8,["modelValue","ticks","max"])]),_:1}),a(M,{cols:"12",sm:"5"},{default:s(()=>[Ml,a(pe,{modelValue:l.targetLevel,"onUpdate:modelValue":t[1]||(t[1]=o=>l.targetLevel=o),ticks:l.levelLabels,"hide-details":"",min:0,max:l.maxLevel,step:"1","show-ticks":"always"},null,8,["modelValue","ticks","max"])]),_:1})]),_:1})}var zl=P(Tl,[["render",Ol]]);const Pl={name:"OperatorDialogEquipment",props:["operatorId"],data(){return{}},computed:{itemUse(){return this.$store.state.itemUseByCharacterId[this.operatorId]}},components:{OperatorDialogEquipmentSlider:zl}};function El(e,t,i,r,n,l){const o=D("OperatorDialogEquipmentSlider");return f(!0),W(F,null,J(l.itemUse.modules,(d,u,c)=>(f(),y(o,{key:c,operatorId:i.operatorId,equipmentId:u,equipmentLevels:d},null,8,["operatorId","equipmentId","equipmentLevels"]))),128)}var Rl=P(Pl,[["render",El]]);const Al={props:["value","id"],emits:["set"],computed:{show:{get(){return this.value},set(e){this.$emit("set",e)}},operator(){return this.$store.state.character.characterDataById[this.id]}},components:{OperatorDialogPhase:ll,OperatorDialogLevel:fl,OperatorDialogSkillLevel:yl,OperatorDialogSkillMastery:Ll,OperatorDialogEquipment:Rl}},Bl=L("mdi-close"),Ul=b("p",null,"Current",-1),Fl=b("p",null,"Target",-1);function ql(e,t,i,r,n,l){const o=D("OperatorDialogPhase"),d=D("OperatorDialogLevel"),u=D("OperatorDialogSkillLevel"),c=D("OperatorDialogSkillMastery"),_=D("OperatorDialogEquipment");return f(),y(Ve,{modelValue:l.show,"onUpdate:modelValue":t[1]||(t[1]=m=>l.show=m),fullscreen:"",scrollable:"",class:"dialog"},{default:s(()=>[a(z,null,{default:s(()=>[a(de,null,{default:s(()=>[a(G,{icon:"",dark:"",onClick:t[0]||(t[0]=m=>l.show=!1)},{default:s(()=>[a(ie,null,{default:s(()=>[Bl]),_:1})]),_:1}),a(we,null,{default:s(()=>[L(re(l.operator.appellation),1)]),_:1})]),_:1}),a(ue,{class:"dialog-container"},{default:s(()=>[a(se,{class:"d-none d-sm-flex"},{default:s(()=>[a(Pe),a(M,{cols:"5",class:"text-center"},{default:s(()=>[Ul]),_:1}),a(M,{cols:"5",class:"text-center"},{default:s(()=>[Fl]),_:1})]),_:1}),a(ke,{class:"d-none d-sm-flex mt-4"}),a(o,{operatorId:i.id},null,8,["operatorId"]),a(ke,{class:"my-4"}),a(d,{operatorId:i.id},null,8,["operatorId"]),a(ke,{class:"my-4"}),a(u,{operatorId:i.id},null,8,["operatorId"]),a(ke,{class:"my-4"}),a(c,{operatorId:i.id},null,8,["operatorId"]),a(ke,{class:"my-4"}),a(_,{operatorId:i.id},null,8,["operatorId"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}var Nl=P(Al,[["render",ql]]);const jl={props:["itemId","number"],emits:["selectItem"],computed:{imgSrc(){return`${me}/images/items/${this.$store.state.item.itemDataById[this.itemId].iconId}.png`}},methods:{selectItem(){this.$emit("selectItem",this.itemId)}}},Gl={class:"item-number"};function Kl(e,t,i,r,n,l){return f(),y(z,{"max-width":"64px",style:va({backgroundImage:`url(${l.imgSrc})`}),class:"rounded-0 item"},{default:s(()=>[b("p",Gl,re(i.number||0),1)]),_:1},8,["style"])}var Pt=P(jl,[["render",Kl],["__scopeId","data-v-7919c55a"]]);const Wl={name:"MaterialInput",props:["itemId","modelValue","max","min"],computed:{material(){return this.$store.state.item.itemDataById[this.itemId]},imgSrc(){return`${me}/images/items/${this.material.iconId}.png`},input:{get(){return this.modelValue||0},set(e){this.$emit("update:modelValue",e)}}}},Hl={class:"current-item-img-wrap"},Yl={class:"v-responsive v-img"},Xl=["src"],Ql=["min","max"];function Jl(e,t,i,r,n,l){return f(),y(z,{"max-width":"64px",class:"rounded-0"},{default:s(()=>[b("div",Hl,[b("div",Yl,[b("img",{src:l.imgSrc,class:"v-img__img v-img__img--contain"},null,8,Xl)])]),te(b("input",{type:"number",min:i.min||0,max:i.max,"onUpdate:modelValue":t[0]||(t[0]=o=>l.input=o),class:"current-item-input-label"},null,8,Ql),[[bt,l.input]])]),_:1})}var Et=P(Wl,[["render",Jl],["__scopeId","data-v-11e421a8"]]);const Zl={name:"MaterialExpItem",props:["itemId","number","min","max"],emits:["update"],data(){return{}},components:{MaterialInput:Et}};function ei(e,t,i,r,n,l){const o=D("MaterialInput");return f(),y(o,{itemId:i.itemId,modelValue:i.number,min:i.min,max:i.max,"onUpdate:modelValue":t[0]||(t[0]=d=>this.$emit("update",{itemId:i.itemId,oldValue:i.number,newValue:d}))},null,8,["itemId","modelValue","min","max"])}var ti=P(Zl,[["render",ei]]);const ai={name:"MaterialFormula",props:["formulaType","formulaId","max"],data(){return{}},computed:{formulaData(){return this.$store.state.itemFormulaDataById[this.formulaType][this.formulaId]},formulaAmount:{get(){return this.$store.state.materialPlanner.itemFormula[this.formulaType][this.formulaId]||0},set(e){this.$store.dispatch(pa,{formulaId:this.formulaId,formulaType:this.formulaType,value:e})}},costs(){return this.formulaData.costs.map(e=>({itemId:e.id,count:e.count*this.formulaAmount}))}},components:{ItemWithNumber:Pt}};function li(e,t,i,r,n,l){const o=D("ItemWithNumber");return f(),y(z,{variant:"outlined",class:"mt-4 pa-4"},{default:s(()=>[a(se,null,{default:s(()=>[a(M,{cols:"12",sm:"4"},{default:s(()=>[a(z,{variant:"outlined",class:"d-flex flex-wrap justify-center"},{default:s(()=>[a(o,{itemId:l.formulaData.itemId,number:l.formulaData.count*l.formulaAmount},null,8,["itemId","number"])]),_:1})]),_:1}),a(M,{cols:"12",sm:"4"},{default:s(()=>[a(Ue,{type:"number",modelValue:l.formulaAmount,"onUpdate:modelValue":t[0]||(t[0]=d=>l.formulaAmount=d),max:i.max+l.formulaAmount,min:0,"hide-details":"",class:"w-100"},null,8,["modelValue","max"])]),_:1}),a(M,{cols:"12",sm:"4"},{default:s(()=>[a(z,{variant:"outlined",class:"d-flex flex-wrap justify-center"},{default:s(()=>[(f(!0),W(F,null,J(l.costs,(d,u)=>(f(),y(o,{key:u,itemId:d.itemId,number:d.count},null,8,["itemId","number"]))),128))]),_:1})]),_:1})]),_:1})]),_:1})}var Rt=P(ai,[["render",li]]);const ii={name:"MaterialDialog",props:["itemId","value"],emits:["set"],computed:{show:{get(){return this.value},set(e){this.$emit("set",e)}},material(){return this.$store.state.item.itemDataById[this.itemId]},imgSrc(){return`${me}/images/items/${this.material.iconId}.png`},itemRequire(){return this.$store.getters.itemRequireById[this.itemId]||0},formulaRequire(){return this.$store.getters.activeFormula.costs[this.itemId]||0},totalRequire(){return this.itemRequire+this.formulaRequire},netRequire(){return this.totalRequire-this.currentItem-(this.$store.getters.activeFormula.item[this.itemId]||0)},currentItem:{get(){return this.$store.state.materialPlanner.currentItem[this.itemId]||0},set(e){this.$store.dispatch(xt,{itemId:this.itemId,value:e})}}},components:{MaterialFormula:Rt}},ri=L("mdi-close"),ni={class:"dialog-container"},si=b("p",null,"Item Require",-1),oi=b("p",null,"Crafting Require",-1),di=b("p",null,"Total Require",-1),ui=b("p",null,"Current",-1),ci=b("p",{class:"text-center"},"Still Require",-1);function vi(e,t,i,r,n,l){const o=D("MaterialFormula");return f(),y(Ve,{modelValue:l.show,"onUpdate:modelValue":t[2]||(t[2]=d=>l.show=d),fullscreen:"",scrollable:"",class:"dialog"},{default:s(()=>[a(z,null,{default:s(()=>[a(de,null,{default:s(()=>[a(G,{icon:"",dark:"",onClick:t[0]||(t[0]=d=>l.show=!1)},{default:s(()=>[a(ie,null,{default:s(()=>[ri]),_:1})]),_:1})]),_:1}),b("div",ni,[a(We,{src:l.imgSrc,width:"86px",class:"ma-auto"},null,8,["src"]),a(se,{class:"mt-4"},{default:s(()=>[a(M,{cols:"12",sm:"6"},{default:s(()=>[a(z,{variant:"outlined",class:"pa-4 text-center h-100"},{default:s(()=>[a(se,null,{default:s(()=>[a(M,{cols:"6"},{default:s(()=>[si,b("p",null,re(l.itemRequire),1)]),_:1}),a(M,{cols:"6"},{default:s(()=>[oi,b("p",null,re(l.formulaRequire),1)]),_:1})]),_:1}),di,b("p",null,re(l.totalRequire),1)]),_:1})]),_:1}),a(M,{cols:"12",sm:"6"},{default:s(()=>[a(z,{variant:"outlined",class:"pa-4 text-center h-100 d-flex flex-column"},{default:s(()=>[ui,a(Pe),a(z,{variant:"outlined"},{default:s(()=>[te(b("input",{type:"number",min:"0",class:"font-color-theme pa-2 text-center w-100","onUpdate:modelValue":t[1]||(t[1]=d=>l.currentItem=d)},null,512),[[bt,l.currentItem]])]),_:1})]),_:1})]),_:1})]),_:1}),a(z,{variant:"outlined",class:"pa-4 mt-4 text-center"},{default:s(()=>[ci,b("p",null,re(l.netRequire),1)]),_:1}),(f(!0),W(F,null,J(l.material.buildingProductList,(d,u)=>(f(),y(o,{key:u,"formula-type":d.roomType,"formula-id":d.formulaId,max:l.netRequire},null,8,["formula-type","formula-id","max"]))),128))])]),_:1})]),_:1},8,["modelValue"])}var pi=P(ii,[["render",vi]]);const mi={name:"MaterialCurrentItem",props:["itemId"],data(){return{}},computed:{number:{get(){return this.$store.state.materialPlanner.currentItem[this.itemId]||0},set(e){this.$store.dispatch(xt,{itemId:this.itemId,value:e})}}},components:{MaterialInput:Et}};function fi(e,t,i,r,n,l){const o=D("MaterialInput");return f(),y(o,{itemId:i.itemId,modelValue:l.number,"onUpdate:modelValue":t[0]||(t[0]=d=>l.number=d)},null,8,["itemId","modelValue"])}var _i=P(mi,[["render",fi]]);const hi={name:"MaterialListDialog",props:["value"],emits:["set"],computed:oe(h({},He(["materials"])),{show:{get(){return this.value},set(e){this.$emit("set",e)}}}),components:{MaterialCurrentItem:_i}},gi=L("mdi-close"),bi=L("Current Item List"),xi={class:"current-item-container"};function yi(e,t,i,r,n,l){const o=D("MaterialCurrentItem");return f(),y(Ve,{modelValue:l.show,"onUpdate:modelValue":t[1]||(t[1]=d=>l.show=d),fullscreen:"",scrollable:"",scrim:!1,class:"dialog"},{default:s(()=>[a(z,null,{default:s(()=>[a(de,null,{default:s(()=>[a(G,{icon:"",dark:"",onClick:t[0]||(t[0]=d=>l.show=!1)},{default:s(()=>[a(ie,null,{default:s(()=>[gi]),_:1})]),_:1}),a(we,null,{default:s(()=>[bi]),_:1})]),_:1}),a(ue,{class:"dialog-container"},{default:s(()=>[b("div",xi,[(f(!0),W(F,null,J(e.materials,(d,u)=>(f(),y(o,{key:u,itemId:d.itemId},null,8,["itemId"]))),128))])]),_:1})]),_:1})]),_:1},8,["modelValue"])}var ki=P(hi,[["render",yi],["__scopeId","data-v-54e499e8"]]);const Ii={name:"MaterialCraftingDialog",props:["value"],emits:["set"],computed:{show:{get(){return this.value},set(e){this.$emit("set",e)}},formulaMaxAmount(){let e={};for(const t of Object.keys(this.$store.state.materialPlanner.itemFormula)){e[t]={};for(const i of Object.keys(this.$store.state.materialPlanner.itemFormula[t])){let n=this.$store.state.itemFormulaDataById[t][i].itemId,l=this.$store.state.materialPlanner.currentItem[n],o=this.$store.getters.itemRequireById[n]||0,d=this.$store.getters.activeFormula.costs[n]||0,c=o+d-l-(this.$store.getters.activeFormula.item[n]||0);e[t][i]=c}}return e}},components:{MaterialFormula:Rt}},Ci=L("mdi-close");function wi(e,t,i,r,n,l){const o=D("MaterialFormula");return f(),y(Ve,{modelValue:l.show,"onUpdate:modelValue":t[1]||(t[1]=d=>l.show=d),fullscreen:"",scrollable:"",scrim:!1,class:"dialog"},{default:s(()=>[a(z,null,{default:s(()=>[a(de,null,{default:s(()=>[a(G,{icon:"",dark:"",onClick:t[0]||(t[0]=d=>l.show=!1)},{default:s(()=>[a(ie,null,{default:s(()=>[Ci]),_:1})]),_:1})]),_:1}),a(ue,{class:"dialog-container"},{default:s(()=>[(f(!0),W(F,null,J(l.formulaMaxAmount,(d,u,c)=>te((f(),y(z,{key:c,variant:"outlined",class:st({"mt-4":c>0})},{default:s(()=>[a(wt,null,{default:s(()=>[L(re(u),1)]),_:2},1024),a(ue,null,{default:s(()=>[(f(!0),W(F,null,J(d,(_,m,g)=>(f(),y(o,{key:g,"formula-type":u,"formula-id":m,max:_},null,8,["formula-type","formula-id","max"]))),128))]),_:2},1024)]),_:2},1032,["class"])),[[be,Object.keys(d).length>0]])),128))]),_:1})]),_:1})]),_:1},8,["modelValue"])}var Si=P(Ii,[["render",wi]]);const $i={data(){return{showAll:!1,selectedItem:"",showMaterialDialog:!1,showMaterialListDialog:!1,showMaterialCraftingDialog:!1,materials:[],lmd:0,expItems:{total:0,items:{},min:{},max:{}}}},computed:oe(h({},He(["materialIds","itemRequireById","activeFormula"])),{itemDataById(){return this.$store.state.item.itemDataById},expItemById(){return this.$store.state.gameData.expItems},expItemList(){return Object.values(this.expItemById).sort((e,t)=>t.gainExp-e.gainExp)},currentItem(){return this.$store.state.materialPlanner.currentItem}}),methods:{getResult(){let e=[],t={total:0,items:{},min:{},max:{}},i=Object.keys(this.expItemById);for(const r of this.materialIds)if(i.includes(r)){let n=(this.itemRequireById[r]||0)-(this.currentItem[r]||0);t.items[r]=n,t.total+=n*this.expItemById[r].gainExp}else if(r.toString()!=="4001"){let n=this.itemRequireById[r]||0,l=this.activeFormula.costs[r]||0,o=this.currentItem[r]||0,d=this.activeFormula.item[r]||0,u=n+l-o-d;u>0&&e.push({itemId:r,number:u,sort:this.itemDataById[r].sortId})}this.materials=e.sort((r,n)=>r.sort-n.sort),this.lmd=this.itemRequireById[4001],this.expItems=t},expItemChange({itemId:e,oldValue:t,newValue:i}){if(t===i)return;let r=h({},this.expItems.items),n=this.expItemById[e].gainExp*Math.abs(i-t);if(i>t)for(let l=this.expItemList.findIndex(o=>o.id===e)+1;l<=this.expItemList.length-1&&n!==0;l++){let o=this.expItemList[l],d=this.expItems.items[o.id];if(d===0)continue;let u=Math.floor(n/o.gainExp);d>u?(r[o.id]-=u,n-=u*o.gainExp):(r[o.id]-=d,n-=d*o.gainExp)}else if(i<t)for(let l=this.expItemList.findIndex(o=>o.id===e)+1;l<=this.expItemList.length-1&&n!==0;l++){let o=this.expItemList[l],d=Math.floor(n/o.gainExp);r[o.id]+=d,n-=d*o.gainExp}n===0?(r[e]=i,this.expItems.items=r,this.expItems.min={},this.expItems.max={}):i>t?this.expItems.max[e]=t:i<t&&(this.expItems.min[e]=t)},selectItem(e){this.selectedItem=e,this.showMaterialDialog=!0},closeDialog(){this.showMaterialCraftingDialog=!1,this.showMaterialDialog=!1,this.showMaterialListDialog=!1,this.getResult()}},components:{ItemWithNumber:Pt,MaterialExpItem:ti,MaterialDialog:pi,MaterialListDialog:ki,MaterialCraftingDialog:Si}},Vi=L("Get result"),Li=L("Current Item"),Ti=L("Crafting"),Di=L("LMD"),Mi=L("EXP");function Oi(e,t,i,r,n,l){const o=D("ItemWithNumber"),d=D("MaterialExpItem"),u=D("MaterialDialog"),c=D("MaterialListDialog"),_=D("MaterialCraftingDialog");return f(),W(F,null,[a(z,{variant:"outlined"},{default:s(()=>[a(St,{class:"flex-wrap"},{default:s(()=>[a(G,{variant:"outlined",onClick:l.getResult,color:"info"},{default:s(()=>[Vi]),_:1},8,["onClick"]),a(G,{variant:"outlined",onClick:t[0]||(t[0]=m=>n.showMaterialListDialog=!0)},{default:s(()=>[Li]),_:1}),a(G,{variant:"outlined",onClick:t[1]||(t[1]=m=>n.showMaterialCraftingDialog=!0)},{default:s(()=>[Ti]),_:1})]),_:1})]),_:1}),a(z,{variant:"outlined",class:"mt-4"},{default:s(()=>[a(de,null,{default:s(()=>[a(we,null,{default:s(()=>[Di]),_:1}),a(Pe),L(" "+re(n.lmd),1)]),_:1})]),_:1}),a(z,{variant:"outlined",class:"mt-4"},{default:s(()=>[a(de,{title:"Material"}),a(ue,{class:"material-container"},{default:s(()=>[(f(!0),W(F,null,J(n.materials,(m,g)=>(f(),y(o,{itemId:m.itemId,number:m.number,key:g,onClick:w=>l.selectItem(m.itemId)},null,8,["itemId","number","onClick"]))),128))]),_:1})]),_:1}),a(z,{variant:"outlined",class:"mt-4"},{default:s(()=>[a(de,null,{default:s(()=>[a(we,null,{default:s(()=>[Mi]),_:1})]),_:1}),a(ue,{class:"material-container"},{default:s(()=>[(f(!0),W(F,null,J(l.expItemList,(m,g)=>(f(),y(d,{key:g,itemId:m.id,number:n.expItems.items[m.id],min:n.expItems.min[m.id],max:n.expItems.max[m.id],onUpdate:l.expItemChange},null,8,["itemId","number","min","max","onUpdate"]))),128))]),_:1})]),_:1}),a(u,{modelValue:n.showMaterialDialog,"onUpdate:modelValue":t[2]||(t[2]=m=>n.showMaterialDialog=m),itemId:n.selectedItem,onSet:l.closeDialog},null,8,["modelValue","itemId","onSet"]),a(c,{modelValue:n.showMaterialListDialog,"onUpdate:modelValue":t[3]||(t[3]=m=>n.showMaterialListDialog=m),onSet:l.closeDialog},null,8,["modelValue","onSet"]),a(_,{modelValue:n.showMaterialCraftingDialog,"onUpdate:modelValue":t[4]||(t[4]=m=>n.showMaterialCraftingDialog=m),onSet:l.closeDialog},null,8,["modelValue","onSet"])],64)}var zi=P($i,[["render",Oi],["__scopeId","data-v-aebd1008"]]);const Pi={name:"CharacterClass",props:["classId"],computed:{imgSrc(){return`${me}/images/class/icon_profession_${this.classId.toLowerCase()}_large.png`}}},Ei={class:"d-flex"},Ri=["src"];function Ai(e,t,i,r,n,l){return f(),y(G,{class:"character-class-icon",height:"56px",width:"56px"},{default:s(()=>[b("div",Ei,[b("img",{src:l.imgSrc},null,8,Ri)])]),_:1})}var Bi=P(Pi,[["render",Ai]]);const Ui={name:"CharacterSubClass",props:["subClassId"],computed:{imgSrc(){return`${me}/images/sub-class/sub_${this.subClassId}_icon.png`}}},Fi={class:"d-flex"},qi=["src"];function Ni(e,t,i,r,n,l){return f(),y(G,{class:"character-class-icon",height:"56px",width:"56px"},{default:s(()=>[b("div",Fi,[b("img",{src:l.imgSrc},null,8,qi)])]),_:1})}var ji=P(Ui,[["render",Ni]]);const At=Symbol.for("vuetify:v-item-group"),Gi=Z({name:"VItemGroup",props:h(h(h({},yt({selectedClass:"v-item--selected"})),Ye()),ze()),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:i}=t;const{themeClasses:r}=Ke(e),{isSelected:n,select:l,next:o,prev:d,selected:u}=kt(e,At);return()=>{var c;return a(e.tag,{class:["v-item-group",r.value]},{default:()=>[(c=i.default)==null?void 0:c.call(i,{isSelected:n,select:l,next:o,prev:d,selected:u.value})]})}}}),Ki=Oe()({name:"VItem",props:It(),setup(e,t){let{slots:i}=t;const{isSelected:r,select:n,toggle:l,selectedClass:o,value:d,disabled:u}=Ct(e,At);return()=>{var c;return(c=i.default)==null?void 0:c.call(i,{isSelected:r.value,selectedClass:o.value,select:n,toggle:l,value:d.value,disabled:u.value})}}}),Wi={name:"CharacterSelectorDialog",props:["selected"],inject:["operators"],emits:["save"],data(){return{selectedOperatorIds:this.selected||[],filterClass:"ALL",filterSubClass:"ALL"}},methods:{save(){this.$emit("save",this.selectedOperatorIds)},selectAll(){let e=new Set(this.selectedOperatorIds.concat(this.filterOperatorIds));this.selectedOperatorIds=[...e]},selectNone(){this.selectedOperatorIds=this.selectedOperatorIds.filter(e=>!this.filterOperatorIds.includes(e))}},computed:{operatorClasses(){return Object.values(this.$store.state.character.characterClassById).filter(e=>!["TOKEN","TRAP"].includes(e.classId))},allSubClasses(){return this.operatorClasses.reduce((e,t)=>e.concat([...t.subClass]),[])},subClasses(){var e;return((e=this.$store.state.character.characterClassById[this.filterClass])==null?void 0:e.subClass)||[]},filterOperatorIds(){return this.operators.filter(e=>this.filterClass!=="ALL"?this.filterSubClass!=="ALL"?this.filterSubClass===e.subProfessionId:this.filterClass===e.profession:!0).map(e=>e.id)}},watch:{filterClass(e,t){e!==t&&(this.filterSubClass="ALL")}},components:{CharacterClass:Bi,CharacterSubClass:ji,OperatorCard:Lt}},Hi=L("mdi-close"),Yi=L("Save"),Xi={class:"bg-black"},Qi=L(" All "),Ji=L(" All "),Zi={class:"d-flex justify-center"},er=L("Select none"),tr=L("Select all");function ar(e,t,i,r,n,l){const o=D("CharacterClass"),d=D("CharacterSubClass"),u=D("OperatorCard");return f(),y(Ve,{fullscreen:"",scrollable:"",persistent:"",class:"dialog"},{default:s(()=>[a(z,null,{default:s(()=>[a(de,null,{default:s(()=>[a(G,{icon:"",dark:"",onClick:l.save},{default:s(()=>[a(ie,null,{default:s(()=>[Hi]),_:1})]),_:1},8,["onClick"]),a(we,null,{default:s(()=>[L(re(n.selectedOperatorIds.length)+" Selected",1)]),_:1}),a(Pe),a(Va,null,{default:s(()=>[a(G,{onClick:l.save},{default:s(()=>[Yi]),_:1},8,["onClick"])]),_:1})]),_:1}),a(ue,{class:"dialog-container"},{default:s(()=>[a(z,{variant:"outlined"},{default:s(()=>[b("div",Xi,[a(it,{modelValue:n.filterClass,"onUpdate:modelValue":t[0]||(t[0]=c=>n.filterClass=c),color:"info",mandatory:"",variant:"outlined",divided:"",class:"character-class-list"},{default:s(()=>[a(G,{class:"character-class-icon",height:"56px",width:"56px",value:"ALL"},{default:s(()=>[Qi]),_:1}),(f(!0),W(F,null,J(l.operatorClasses,(c,_)=>(f(),y(o,{key:_,classId:c.classId,value:c.classId},null,8,["classId","value"]))),128))]),_:1},8,["modelValue"]),a(it,{modelValue:n.filterSubClass,"onUpdate:modelValue":t[1]||(t[1]=c=>n.filterSubClass=c),color:"info",mandatory:"",variant:"outlined",divided:"",class:"character-class-list"},{default:s(()=>[a(G,{class:"character-class-icon",height:"56px",width:"56px",value:"ALL"},{default:s(()=>[Ji]),_:1}),(f(!0),W(F,null,J(l.allSubClasses,(c,_)=>te((f(),y(d,{key:_,subClassId:c,value:c},null,8,["subClassId","value"])),[[be,l.subClasses.includes(c)]])),128))]),_:1},8,["modelValue"]),b("div",Zi,[a(G,{variant:"outlined",class:"rounded-0",onClick:l.selectNone},{default:s(()=>[er]),_:1},8,["onClick"]),a(G,{variant:"outlined",class:"rounded-0",onClick:l.selectAll},{default:s(()=>[tr]),_:1},8,["onClick"])])]),a(ue,null,{default:s(()=>[a(Gi,{modelValue:n.selectedOperatorIds,"onUpdate:modelValue":t[2]||(t[2]=c=>n.selectedOperatorIds=c),multiple:"",class:"operatorContainer"},{default:s(()=>[(f(!0),W(F,null,J(l.operators,(c,_)=>(f(),y(Ki,{key:_,value:c.id},{default:s(({isSelected:m,toggle:g})=>[te(a(u,{id:c.id,name:c.appellation,isSelected:m,onClick:g},null,8,["id","name","isSelected","onClick"]),[[be,l.filterOperatorIds.includes(c.id)]])]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}var lr=P(Wi,[["render",ar],["__scopeId","data-v-2c10475e"]]);const Se=Symbol.for("vuetify:v-expansion-panel"),ir=["default","accordion","inset","popout"],rr=Z({name:"VExpansionPanels",props:h(h(h({color:String,variant:{type:String,default:"default",validator:e=>ir.includes(e)},readonly:Boolean},yt()),Ye()),ze()),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:i}=t;kt(e,Se);const{themeClasses:r}=Ke(e),n=p(()=>e.variant&&`v-expansion-panels--variant-${e.variant}`);return nt({VExpansionPanel:{color:Q(e,"color")},VExpansionPanelTitle:{readonly:Q(e,"readonly")}}),ye(()=>a(e.tag,{class:["v-expansion-panels",r.value,n.value]},i)),{}}}),Bt=xe({color:String,expandIcon:{type:ge,default:"$expand"},collapseIcon:{type:ge,default:"$collapse"},hideActions:Boolean,ripple:{type:[Boolean,Object],default:!1},readonly:Boolean}),nr=Z({name:"VExpansionPanelTitle",directives:{Ripple:_t},props:h({},Bt()),setup(e,t){let{slots:i}=t;const r=$e(Se);if(!r)throw new Error("[Vuetify] v-expansion-panel-title needs to be placed inside v-expansion-panel");const{backgroundColorClasses:n,backgroundColorStyles:l}=Ce(e,"color"),o=p(()=>({collapseIcon:e.collapseIcon,disabled:r.disabled.value,expanded:r.isSelected.value,expandIcon:e.expandIcon,readonly:e.readonly}));return ye(()=>{var d;return te(a("button",{class:["v-expansion-panel-title",{"v-expansion-panel-title--active":r.isSelected.value},n.value],style:l.value,type:"button",tabindex:r.disabled.value?-1:void 0,disabled:r.disabled.value,"aria-expanded":r.isSelected.value,onClick:e.readonly?void 0:r.toggle},[a("div",{class:"v-expansion-panel-title__overlay"},null),(d=i.default)==null?void 0:d.call(i,o.value),!e.hideActions&&a("div",{class:"v-expansion-panel-title__icon"},[i.actions?i.actions(o.value):a(ie,{icon:r.isSelected.value?e.collapseIcon:e.expandIcon},null)])]),[[Ge("ripple"),e.ripple]])}),{}}}),Fe=Z({name:"VExpansionPanelText",props:h({},Vt()),setup(e,t){let{slots:i}=t;const r=$e(Se);if(!r)throw new Error("[Vuetify] v-expansion-panel-text needs to be placed inside v-expansion-panel");const{hasContent:n,onAfterLeave:l}=$a(e,r.isSelected);return ye(()=>{var o;return a(ma,{onAfterLeave:l},{default:()=>[te(a("div",{class:"v-expansion-panel-text"},[i.default&&n.value&&a("div",{class:"v-expansion-panel-text__wrapper"},[(o=i.default)==null?void 0:o.call(i)])]),[[be,r.isSelected.value]])]})}),{}}}),rt=Z({name:"VExpansionPanel",props:h(h(h(h(h(h({title:String,text:String,bgColor:String},mt()),It()),Vt()),pt()),Ye()),Bt()),setup(e,t){let{slots:i}=t;const r=Ct(e,Se),{backgroundColorClasses:n,backgroundColorStyles:l}=Ce(e,"bgColor"),{elevationClasses:o}=ht(e),{roundedClasses:d}=gt(e),u=p(()=>(r==null?void 0:r.disabled.value)||e.disabled),c=p(()=>r.group.items.value.reduce((g,w,E)=>(r.group.selected.value.includes(w.id)&&g.push(E),g),[])),_=p(()=>{const g=r.group.items.value.findIndex(w=>w.id===r.id);return!r.isSelected.value&&c.value.some(w=>w-g===1)}),m=p(()=>{const g=r.group.items.value.findIndex(w=>w.id===r.id);return!r.isSelected.value&&c.value.some(w=>w-g===-1)});return ft(Se,r),ye(()=>{var g;const w=!!(i.text||e.text),E=!!(i.title||e.title);return a(e.tag,{class:["v-expansion-panel",{"v-expansion-panel--active":r.isSelected.value,"v-expansion-panel--before-active":_.value,"v-expansion-panel--after-active":m.value,"v-expansion-panel--disabled":u.value},d.value,n.value],style:l.value,"aria-expanded":r.isSelected.value},{default:()=>[a("div",{class:["v-expansion-panel__shadow",...o.value]},null),E&&a(nr,{collapseIcon:e.collapseIcon,color:e.color,expandIcon:e.expandIcon,hideActions:e.hideActions,ripple:e.ripple},{default:()=>[i.title?i.title():e.title]}),w&&a(Fe,{eager:e.eager},{default:()=>[i.text?i.text():e.text]}),(g=i.default)==null?void 0:g.call(i)]})}),{}}}),sr={async created(){await this.fetchData()},data(){return{loading:!0,panel:["OPERATOR","ITEM"],selectedOperator:"",showOperatorDialog:!1,showCharacterSelectorDialog:!1}},methods:{async fetchData(){this.loading=!0,await Promise.all([this.$store.dispatch(fa),this.$store.dispatch(_a),this.$store.dispatch(ha),this.$store.dispatch(ga),this.$store.dispatch(ba),this.$store.dispatch(xa),this.$store.dispatch(ya)]),await this.$store.dispatch(ka),this.loading=!1},selectOperator(e){this.selectedOperator=e,this.showOperatorDialog=!0},saveSelectedOperatorIds(e){this.$store.dispatch(Ia,e),this.showCharacterSelectorDialog=!1}},computed:oe(h({},He(["operatorIds"])),{characterDataById(){return this.$store.state.character.characterDataById},operators(){return this.operatorIds.map(e=>this.characterDataById[e]).sort((e,t)=>t.rarity-e.rarity||e.appellation.localeCompare(t.appellation))},selectedOperatorIds(){return this.$store.state.materialPlanner.selectedOperatorIds}}),watch:{TARGET(e){localStorage.setItem("MaterialPlanner",JSON.stringify({TARGET:e,current:this.current,currentItem:this.currentItem}))},current(e){localStorage.setItem("MaterialPlanner",JSON.stringify({TARGET:this.TARGET,current:e,currentItem:this.currentItem}))},currentItem(e){localStorage.setItem("MaterialPlanner",JSON.stringify({TARGET:this.TARGET,current:this.current,currentItem:e}))}},provide(){return{operators:p(()=>this.operators)}},components:{OperatorSelectedList:Ua,OperatorDialog:Nl,MaterialList:zi,CharacterSelectorDialog:lr}};function or(e,t,i,r,n,l){const o=D("OperatorSelectedList"),d=D("MaterialList"),u=D("OperatorDialog"),c=D("CharacterSelectorDialog");return f(),W(F,null,[n.loading?(f(),y($t,{key:0,indeterminate:""})):Be("",!0),n.loading?Be("",!0):(f(),y(Ca,{key:1},{default:s(()=>[a(rr,{modelValue:n.panel,"onUpdate:modelValue":t[1]||(t[1]=_=>n.panel=_),multiple:""},{default:s(()=>[a(rt,{title:"Operators",value:"OPERATOR"},{default:s(()=>[a(Fe,null,{default:s(()=>[a(o,{onSelectOperator:l.selectOperator,onOpenCharacterSelectorDialog:t[0]||(t[0]=_=>n.showCharacterSelectorDialog=!0)},null,8,["onSelectOperator"])]),_:1})]),_:1}),a(rt,{title:"Materials",value:"ITEM"},{default:s(()=>[a(Fe,null,{default:s(()=>[a(d)]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(u,{modelValue:n.showOperatorDialog,"onUpdate:modelValue":t[2]||(t[2]=_=>n.showOperatorDialog=_),id:n.selectedOperator,onSet:t[3]||(t[3]=_=>n.showOperatorDialog=!1)},null,8,["modelValue","id"]),a(c,{modelValue:n.showCharacterSelectorDialog,"onUpdate:modelValue":t[4]||(t[4]=_=>n.showCharacterSelectorDialog=_),selected:l.selectedOperatorIds,onSave:l.saveSelectedOperatorIds},null,8,["modelValue","selected","onSave"])]),_:1}))],64)}var vr=P(sr,[["render",or]]);export{vr as default};
