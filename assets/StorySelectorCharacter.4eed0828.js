import{d as g,V as B,_ as C,c as _,w as i,o as c,a as p,t as V,h as S,f as m,i as h,r as I,b as D,F as f,aF as O,j as $,J as v}from"./index.af01303f.js";import{u as w}from"./CharacterStore.6fb21276.js";import{u as L}from"./StoryReaderStore.6789030f.js";import{u as k}from"./StoryTableStore.df7801a2.js";import{V as N}from"./VCard.01af00f6.js";import{V as F}from"./VDialog.e858caa7.js";import{V as T,a as z,b as R}from"./VList.f95ed554.js";import"./useRender.d6870f84.js";import"./router.da5ed236.js";import"./tag.49f72dba.js";import"./forwardRefs.54bd1271.js";import"./index.74147b0e.js";const U=g({name:"OperatorCard",props:["characterId","characterName","isSelected"],setup(e){return{imgSrc:`${B}/images/avatar/${e.characterId}.webp`}}});const j={class:"operator-card-img-wrap"},q=["src"],E={class:"operator-card-name"};function J(e,a,n,r,o,l){return c(),_(N,{"max-width":"64px",class:"rounded-0"},{default:i(()=>[p("div",j,[p("img",{src:e.imgSrc,class:"operator-card-img"},null,8,q)]),p("p",E,V(e.characterName),1)]),_:1})}const A=C(U,[["render",J],["__scopeId","data-v-0b92bedf"]]),G=g({name:"CharStorySetListDialog",props:["characterId"],emits:["selectStorySet"],setup(e,{emit:a}){const n=L(),r=S(()=>n.language),{getCharacterStorySet:o}=k(),l=S(()=>o(e.characterId));return{language:r,storySetList:l}}});function H(e,a,n,r,o,l){return c(),_(F,null,{default:i(()=>[m(N,null,{default:i(()=>[m(T,null,{default:i(()=>[(c(!0),h(f,null,I(e.storySetList,(s,d)=>(c(),_(z,{key:d,onClick:t=>e.$emit("selectStorySet",s.id)},{default:i(()=>[m(R,null,{default:i(()=>[D(V(s.name[e.language]||s.name.zh_CN),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1})}const K=C(G,[["render",H]]),M=g({name:"StorySelectorCharacter",components:{OperatorCard:A,CharStorySetListDialog:K},setup(){const e=L(),a=O(),n=S(()=>e.language),r=$(!1),o=$(""),{getStorySetByCharacterId:l}=k(),{getOperators:s}=w(),d=S(()=>l()),t=s().filter(u=>d.value?u.id in d.value:!1);return{dialog:r,selectedCharacter:o,language:n,operators:t,selectCharacter:u=>{o.value=u,r.value=!0},selectStorySet:u=>{r.value=!1,a.push({name:"select-story",query:{storySetId:u}})}}}});const P={class:"character-container"};function Q(e,a,n,r,o,l){const s=v("OperatorCard"),d=v("CharStorySetListDialog");return c(),h(f,null,[p("div",P,[(c(!0),h(f,null,I(e.operators,(t,y)=>(c(),_(s,{key:y,characterId:t.id,characterName:t.name[e.language]||t.appellation||t.name.zh_CN,onClick:b=>e.selectCharacter(t.id)},null,8,["characterId","characterName","onClick"]))),128))]),m(d,{modelValue:e.dialog,"onUpdate:modelValue":a[0]||(a[0]=t=>e.dialog=t),characterId:e.selectedCharacter,onSelectStorySet:e.selectStorySet},null,8,["modelValue","characterId","onSelectStorySet"])],64)}const ne=C(M,[["render",Q],["__scopeId","data-v-0cf76850"]]);export{ne as default};
